var _____WB$wombat$assign$function_____ = function(name) {return (self._wb_wombat && self._wb_wombat.local_init && self._wb_wombat.local_init(name)) || self[name]; };
if (!self.__WB_pmw) { self.__WB_pmw = function(obj) { this.__WB_source = obj; return this; } }
{
  let window = _____WB$wombat$assign$function_____("window");
  let self = _____WB$wombat$assign$function_____("self");
  let document = _____WB$wombat$assign$function_____("document");
  let location = _____WB$wombat$assign$function_____("location");
  let top = _____WB$wombat$assign$function_____("top");
  let parent = _____WB$wombat$assign$function_____("parent");
  let frames = _____WB$wombat$assign$function_____("frames");
  let opener = _____WB$wombat$assign$function_____("opener");

var skyadv_wallpaperCallback=function(d,b,a,c,e){$(document).ready(function(){$("body").addClass("with-adv");
if(typeof c!="undefined"){var f="<div id='"+c+"' class='advNew advHeaderNew no-move-left'><a href=''></a></div>";
$("body").append(f)
}else{var f="<div class='advNew advHeaderNew no-move-left'><a href=''></a></div>";
$("body").append(f)
}if(typeof e!="undefined"){var g="<div id='"+e+"' class='advNew advRightNew no-move-left'><a href=''></a></div>";
$("body").append(g)
}else{var g="<div class='advNew advRightNew no-move-left'><a href=''></a></div>";
$("body").append(g)
}if(typeof d!="undefined"){$(".advNew").css("background-image","url('"+d+"')")
}if(typeof b!="undefined"){$(".advNew").css("background-color",b)
}if(typeof a!="undefined"){$(".advNew a").attr("href",a)
}})
};
if(!$("body").find(".moveContainer").length>0){$("#header").next().addClass("moveContainer")
}var urlPlayer="";
var oldatamenu="";
var itissmaller=false;
var isitsmallerthanwindow=function(){var b=$(".moveContainer").height();
var a=$(window).height();
return(b<a)
};
var itissmaller=isitsmallerthanwindow();
if(document.location.hostname.indexOf("caem.")!=-1||document.location.hostname.indexOf("preaem.")!=-1){urlPlayer="https://web.archive.org/web/20171123134910/http://coll.player.sky.it"
}else{urlPlayer="https://web.archive.org/web/20171123134910/http://player.sky.it"
}var header={bodyElement:$("body"),msgError:$(".msgError"),searchInput:$(".searchInput"),searchBtn:$(".searchBtn"),searchOverlayClose:$(".search_overlay_close"),eveningNewsBtn:$(".eveningNewsBtn"),eveningNewsOverlayClose:$(".eveningNews_overlay_close"),menuBorder:$(".js-menuBorder"),moveContainer:$(".moveContainer"),jsMenuOpen:$(".js-menuOpen"),topBar:$("#topBar"),loginBtn:$(".js-loginBtn"),loginOpen:$(".js-loginOpen"),loginClose:$(".loginClose"),loggedBtn:$(".loginOpenPanel"),menuIco:$(".menuIco"),userIo:$(".userIo"),menuMobile:$(".js-menuMobile"),mMenuClose:$(".js-mMenuClose"),mLoginClose:$(".js-mLoginClose"),mobileAccordionItem:$(".js-menuMobileFirstLevel"),menuMobileSecondLevel:$(".menuMobile_secondLevel"),closeThirdLevel:$(".js-closeThirdLevel"),dataForgotLink:$(".dataForgot_link"),login:$("#login"),dataForgot:$("#dataForgot"),dataSuccess:$("#dataSuccess"),loginBackArrow:$(".loginBackArrow"),menuVideoPlay:$(".js-play"),overlayVideoContainer:$(".overlayVideo_container"),tissueOverlay:$(".tissueOverlay"),closePopUp:$(".js-closePopUp"),iframeVideo:$(".iframeVideo"),internalNavMenu:$(".internalNavMenu"),internalNavMenuItem:$(".internalNavMenu_item a"),footerBox:$("#footer"),menuMobileThirdLevel:$(".menuMobile_thirdLevel"),menuMobileSearch:$(".menuMobile_search"),menuMobileContainer:$(".menuMobile_container"),menuMobileContainerAnchor:$(".menuMobile_container a"),menuMobileRowContainer:$(".menuMobile_rowContainer"),menuMobileRow:$(".menuMobile_row"),mobileSearchRow:$(".mobileSearch_row"),internalNavMenuBorder:$(".internalNavMenu_border"),internalSection:$(".js-internalSection"),menuMobileRowHeight:"",menuSelected:"",menuHeight:"",scroll:0,oldScroll:0,scrollDir:0,topBarHeight:"",menuOpenTimeline:"",loginHeight:"",doubleMenu:"",internalNavMenuInitialTop:"",windowWidth:window.innerWidth,init:function(){setTimeout(function(){if($(".switch_container:hidden").length>0){if($("#smartbanner:visible").length>0){$("#header").attr("style","top:36");
$(".moveContainer").addClass("noswitch")
}else{$("#header").attr("style","top:0");
$(".moveContainer").addClass("noswitch");
$("#header").removeClass("totop_smartbanner_space_top");
$("#header").removeClass("totop_smartbanner_space");
$(".moveContainer").removeClass("nosmartbanner")
}}},800);
setTimeout(function(){if($(".switch_container:hidden").length>0){if($("#smartbanner:visible").length>0){$("#header").attr("style","top:36");
$(".moveContainer").addClass("noswitch")
}else{$("#header").attr("style","top:0");
$(".moveContainer").addClass("noswitch");
$("#header").removeClass("totop_smartbanner_space_top");
$("#header").removeClass("totop_smartbanner_space");
$(".moveContainer").removeClass("nosmartbanner")
}}},1000);
setTimeout(function(){if($(".switch_container:hidden").length>0){if($("#smartbanner:visible").length>0){$("#header").attr("style","top:36");
$(".moveContainer").addClass("noswitch")
}else{$("#header").attr("style","top:0");
$(".moveContainer").addClass("noswitch");
$("#header").removeClass("totop_smartbanner_space_top");
$("#header").removeClass("totop_smartbanner_space");
$(".moveContainer").removeClass("nosmartbanner")
}}},3000);
header.doubleMenu=$("#header").hasClass("undocked");
$(".internalNavMenu_item a").click(function(){$("html, body").animate({scrollTop:$($.attr(this,"href")).offset().top-80},820,"easeInOutCubic");
return false
});
header.menuMobileContainerAnchor.on("click",function(){header.menuMobileContainer.animate({scrollTop:"0px"},500)
});
$(window).resize(function(){header.windowWidth=$(window).width();
$(".login_container").height($(window).height())
});
TweenMax.set(header.overlayVideoContainer,{scale:0,opacity:0,visibility:"hidden"});
header.topBarHeight=header.topBar.height();
header.menuMobileRowHeight=header.menuMobileRow.outerHeight();
header.internalNavMenuItem.click(function(){var b=$(this);
header.internalNavMenuItem.removeClass("selected");
b.addClass("selected");
var c=b.parent();
if(c.length>0){header.internalMenuBorder(c,20)
}});
var a=$(".internalNavMenu_item a.selected").parent();
header.searchConfig();
header.menuConfig();
header.menuMobileAnim();
header.loginMobileAnim();
header.menuMobileAccordion();
header.menuMobileThirdLevelOpen();
header.loginStep();
header.openVideo();
header.closeVideo();
header.menuMobileSeach();
$(".login_container").height($(window).height());
header.doubleMenuManagment();
if(a.length>0){header.internalMenuBorder(a,20)
}header.loginHeight=header.loginOpen.outerHeight();
header.loginTimeline=new TimelineMax({});
header.timelinePopUp=new TimelineMax({tweens:[TweenMax.to(header.overlayVideoContainer,0.4,{scale:1,opacity:1,visibility:"visible",force3D:true,ease:Back.easeOut}),],paused:true});
header.timelineOverlay=new TimelineMax({tweens:[TweenMax.to(header.tissueOverlay,0.4,{opacity:1,visibility:"visible",force3D:true,ease:Cubic.easeInOut}),],paused:true});
header.searchTimeline=new TimelineMax({tweens:[TweenMax.to(header.mobileSearchRow,0.4,{x:0,force3D:true,ease:Cubic.easeInOut}),],paused:true});
header.internalMenuShowBorder(header.internalSection,120);
header.highlightCurrentPageMenu()
},internalMenuShowBorder:function(a,e){var f;
var b;
var c=$(window).height();
var d=$(document).height();
if(!$("html").hasClass("mobile")){$(window).scroll(function(g){b=$(window).scrollTop()+c-e;
windowScrollTop=$(window).scrollTop();
scollTopAddWindowHeight=windowScrollTop+c;
a.each(function(k){var j=$(this);
f=j.offset().top;
windowScrollTopDef=windowScrollTop+130;
if(windowScrollTopDef>=f&&!j.hasClass("internalSectionScroll")){j.addClass("internalSectionScroll");
var h=j.attr("id");
$(".internalNavMenu_item a").removeClass("selected");
$(".internalNavMenu_item a[href=#"+h+"]").addClass("selected");
var l=$(".internalNavMenu_item a.selected").parent();
if(l.length>0){header.internalMenuBorder(l,20)
}}else{if(windowScrollTopDef<=f&&j.hasClass("internalSectionScroll")){j.removeClass("internalSectionScroll");
var h=j.attr("id");
$(".internalNavMenu_item a").removeClass("selected");
$(".internalNavMenu_item a[href=#"+h+"]").parent().prev().find("a").addClass("selected");
var l=$(".internalNavMenu_item a.selected").parent();
if(l.length>0){header.internalMenuBorder(l,20)
}}}if((window.innerHeight+window.scrollY)>=document.body.offsetHeight){$(".js-internalSection:last-child").addClass("internalSectionScroll");
$(".internalNavMenu_item a").removeClass("selected");
$(".internalNavMenu_item:last-child a").addClass("selected");
var l=$(".internalNavMenu_item a.selected").parent();
if(l.length>0){header.internalMenuBorder(l,20)
}}})
})
}},internalMenuBorder:function(d,c){var a=parseInt(d.position().left);
var b=parseInt(d.width());
header.internalNavMenuBorder.animate({left:a+c,width:b},120,"easeInOutCubic")
},doubleMenuManagment:function(){if(header.internalNavMenu.length>0){header.internalNavMenuInitialTop=header.internalNavMenu.offset().top;
$(window).scroll(function(){if(!header.internalNavMenu.hasClass("internalNavMenuFixed")){if(header.scroll>=header.internalNavMenuInitialTop){header.internalNavMenu.addClass("internalNavMenuFixed")
}}if(header.internalNavMenu.hasClass("internalNavMenuFixed")){if(header.scroll<header.internalNavMenuInitialTop){header.internalNavMenu.removeClass("internalNavMenuFixed")
}}})
}},closeVideo:function(){header.closePopUp.click(function(){header.timelinePopUp.reverse();
header.timelineOverlay.reverse();
header.iframeVideo.attr("src","")
});
header.tissueOverlay.click(function(){header.timelinePopUp.reverse();
header.timelineOverlay.reverse();
header.iframeVideo.attr("src","")
})
},openVideo:function(){header.menuVideoPlay.click(function(){var a=$(this);
var b=a.attr("data-video");
header.iframeVideo.attr("src",urlPlayer+"/embed/None/45/"+b+"?autoplay=true");
header.timelinePopUp.play();
header.timelineOverlay.play()
})
},loginStep:function(){header.dataForgotLink.click(function(){header.login.hide();
header.dataForgot.show();
header.loginBackArrow.show();
if(header.windowWidth>1024){header.loginOpen.outerHeight()=header.bodyElement.outerHeight();
header.loginHeight=header.loginOpen.outerHeight();
TweenMax.to(header.moveContainer,0.4,{y:header.loginHeight,force3D:true,ease:Cubic.easeInOut})
}});
header.loginBackArrow.click(function(){header.login.show();
header.dataForgot.hide();
header.loginBackArrow.hide();
header.dataSuccess.hide();
if(header.windowWidth>1024){header.loginOpen.outerHeight()=header.bodyElement.outerHeight();
header.loginHeight=header.loginOpen.outerHeight()
}})
},menuMobileSeach:function(){header.menuMobileSearch.click(function(){var c=$(this);
c.toggleClass("open");
var a=c.hasClass("open");
if(a==true){TweenMax.to(header.menuMobileRowContainer,0.4,{y:header.menuMobileRowHeight,force3D:true,ease:Cubic.easeIn,onComplete:b()});
TweenMax.to(header.menuMobileThirdLevel,0.4,{y:header.menuMobileRowHeight,force3D:true,ease:Cubic.easeIn,onComplete:b()})
}else{header.searchTimeline.reverse();
TweenMax.to(header.menuMobileRowContainer,0.4,{y:0,force3D:true,ease:Cubic.easeInOut,delay:0.5});
TweenMax.to(header.menuMobileThirdLevel,0.4,{y:0,force3D:true,ease:Cubic.easeInOut,delay:0.5})
}function b(){header.searchTimeline.play();
$("#mobileSearch").focus()
}})
},menuMobileThirdLevelOpen:function(){header.menuMobileSecondLevel.click(function(){var c=$(this);
var b=c.attr("data-menu");
b=b.replace(/\s/g,".");
var a=$(".thirdLevel-"+b);
TweenMax.to(a,0.4,{x:"0%",force3D:true,ease:Cubic.easeInOut})
});
header.closeThirdLevel.click(function(){var c=$(this);
var b=c.attr("data-menu");
b=b.replace(/\s/g,".");
var a=$(".thirdLevel-"+b);
TweenMax.to(a,0.4,{x:"-100%",force3D:true,ease:Cubic.easeInOut})
})
},menuMobileAccordion:function(){header.mobileAccordionItem.click(function(){var a=$(this);
header.scrollToTop();
if(a.hasClass("open")){header.mobileAccordionItem.removeClass("open").addClass("close");
a.removeClass("open").addClass("close")
}else{header.mobileAccordionItem.removeClass("open").addClass("close");
a.addClass("open").removeClass("close")
}var c=$(".js-menuMobileFirstLevel.open").next(".menuMobile_accordion");
var b=$(".js-menuMobileFirstLevel.close").next(".menuMobile_accordion");
c.slideDown("300");
b.slideUp("300")
})
},scrollToTop:function(){header.menuMobile.animate({scrollTop:0},"300")
},menuMobileAnim:function(){header.menuIco.click(function(){TweenMax.to(header.menuMobile,0.4,{x:"0%",force3D:true,ease:Cubic.easeIn});
header.bodyElement.addClass("hiddenY")
});
header.mMenuClose.click(function(){TweenMax.to(header.menuMobile,0.4,{x:"-100%",force3D:true,ease:Cubic.easeIn});
header.bodyElement.removeClass("hiddenY")
})
},loginMobileAnim:function(){header.userIo.click(function(){TweenMax.to(header.loginOpen,0.4,{x:"0%",force3D:true,ease:Cubic.easeIn}),header.bodyElement.addClass("hiddenY");
header.bodyElement.addClass("u-noscroll");
if(it_sky_cassettone_login!==undefined){it_sky_cassettone_login.retrieveAllInfo()
}else{if(typeof skyIdUserData=="undefined"){if(typeof resetHomeNotLoggedView!=="undefined"){resetHomeNotLoggedView()
}}else{if(typeof resetHomeLoggedView!=="undefined"){resetHomeLoggedView(skyIdUserData)
}}}});
header.mLoginClose.click(function(){TweenMax.to(header.loginOpen,0.4,{x:"100%",force3D:true,ease:Cubic.easeIn}),header.bodyElement.removeClass("hiddenY");
header.bodyElement.removeClass("u-noscroll")
})
},topBarMove:function(){header.scroll=$(window).scrollTop();
if(header.doubleMenu==false){if(header.scroll==0){TweenMax.to(header.topBar,0,{height:header.topBarHeight,force3D:true,ease:Cubic.easeInOut});
TweenMax.to(header.moveContainer,0.3,{paddingTop:137,force3D:true,ease:Cubic.easeInOut})
}else{TweenMax.to(header.topBar,0,{height:0,force3D:true,ease:Cubic.easeInOut});
TweenMax.to(header.moveContainer,0.3,{paddingTop:97,force3D:true,ease:Cubic.easeInOut})
}}},topBarMoveMobile:function(){TweenMax.set(header.moveContainer,0.3,{paddingTop:190,force3D:true,ease:Cubic.easeInOut})
},menuConfig:function(){header.loggedBtn.click(function(){header.loginBtn.toggleClass("open");
header.loggedBtn.toggleClass("open");
header.loggedAnimationTimeline();
header.bodyElement.toggleClass("","move-left");
$(".login_container").height($(window).height());
if(it_sky_cassettone_login!==undefined){if(header.bodyElement.hasClass("move-left")){it_sky_cassettone_login.retrieveAllInfo()
}}if(typeof resetHomeLoggedView!=="undefined"){resetHomeLoggedView(skyIdUserData)
}if(typeof manageRecaptchaApiCall!=="undefined"){manageRecaptchaApiCall()
}});
header.loginBtn.click(function(){header.loginBtn.toggleClass("open");
header.loggedBtn.toggleClass("open");
header.loginAnimationTimeline();
header.bodyElement.toggleClass("","move-left");
$(".login_container").height($(window).height());
if(header.bodyElement.hasClass("move-left")){if(typeof resetHomeNotLoggedView!=="undefined"){resetHomeNotLoggedView()
}if(it_sky_cassettone_login!==undefined){it_sky_cassettone_login.retrieveAllInfo()
}}});
header.loginClose.click(function(){header.loginBtn.toggleClass("open");
header.loggedBtn.toggleClass("open");
header.loginTimeline.reverse();
header.bodyElement.toggleClass("move-left");
resetLoginForms();
header.msgError.hide()
});
header.jsMenuOpen.mouseenter(function(){if(header.loginBtn.hasClass("open")){return
}var b=$(this);
var a=b.attr("data-menu");
oldatamenu=a;
header.menuSelected=$(".subMenu-"+a);
header.menuSelected.show();
setTimeout(function(){$(".subMenu_singleContainer").not(".subMenu-"+a).hide()
},400);
header.menuHeight=header.menuSelected.outerHeight();
header.menuSelected.toggleClass("open");
header.menuAnimationOver(a);
footer.footerElement.animate({top:header.menuSelected.outerHeight()+"px"},{queue:false,duration:100})
}).mouseleave(function(){var c=$(this);
var b=c.attr("data-menu");
if(header.loginBtn.hasClass("open")){return
}header.menuSelected.toggleClass("open");
header.menuAnimationLeave(b);
var a=oldatamenu;
oldatamenu="";
setTimeout(function(){if(oldatamenu==""){$(".subMenu-"+a).hide();
footer.footerElement.animate({top:"0px"},{queue:false,duration:100})
}},300)
});
header.menuBorder.mouseenter(function(a){if(header.loginBtn.hasClass("open")){return
}header.menuItemOver(a)
}).mouseleave(function(a){if(header.loginBtn.hasClass("open")){return
}header.menuItemLeave(a)
})
},loggedAnimationTimeline:function(){var a=header.loggedBtn.hasClass("open");
a?header.bodyElement.addClass("move-left"):header.bodyElement.removeClass("move-left")
},loginAnimationTimeline:function(){var a=header.loginBtn.hasClass("open");
a?header.bodyElement.addClass("move-left"):header.bodyElement.removeClass("move-left")
},menuItemOver:function(a){var b=$(a.currentTarget);
TweenMax.to(b.find(".border"),0.35,{width:b[0].offsetWidth-1,opacity:1,force3D:true,ease:Cubic.easeInOut})
},menuItemLeave:function(a){var b=$(a.currentTarget);
TweenMax.to(b.find(".border"),0.35,{width:0,force3D:true,ease:Cubic.easeInOut})
},menuAnimationOver:function(b){var a=$(".js-menuBorder[data-menu='"+b+"']");
a.addClass("open");
TweenMax.to(a.find(".border"),0.35,{width:a[0].offsetWidth-1,opacity:1,force3D:true,ease:Cubic.easeInOut});
TweenMax.to(header.menuSelected,0.4,{y:"0%",force3D:true,ease:Cubic.easeInOut});
TweenMax.to(header.moveContainer,0.4,{y:header.menuHeight,force3D:true,ease:Cubic.easeInOut})
},menuAnimationLeave:function(b){var a=$(".js-menuBorder[data-menu='"+b+"']");
a.removeClass("open");
TweenMax.to(a.find(".border"),0.35,{width:0,force3D:true,ease:Cubic.easeInOut});
TweenMax.to(header.menuSelected,0.4,{y:"-100%",force3D:true,ease:Cubic.easeInOut});
TweenMax.to(header.moveContainer,0.4,{y:0,force3D:true,ease:Cubic.easeInOut})
},searchConfig:function(){header.eveningNewsBtn.click(function(){var b=$(this);
var a=b.attr("data-position");
$("#eveningNewsOverlay-"+a).addClass("open")
});
header.searchBtn.click(function(){var b=$(this);
$("#searchOverlay-header").css("visibility","visible");
var a=b.attr("data-position");
$("#searchOverlay-"+a).addClass("open")
});
header.eveningNewsOverlayClose.click(function(){var b=$(this);
var a=b.attr("data-position");
$("#eveningNewsOverlay-"+a).removeClass("open");
setTimeout(function(){$("#email_iscr_"+a).val("");
$("#eveningNews_check-"+a).removeAttr("checked");
$("#email_iscr_"+a).removeClass("error-evn")
},1000)
});
header.searchOverlayClose.click(function(){var b=$(this);
var a=b.attr("data-position");
$("#searchOverlay-"+a).removeClass("open");
setTimeout(function(){$("#searchInput-"+a).val("").css("width","0px");
$("#searchOverlay-header").css("visibility","hidden")
},1000)
});
header.searchInput.keyup(function(){var b=$(this).val().length;
var a=b*8;
$(this).css("width",a)
})
},highlightCurrentPageMenu:function(){var a;
a=window.location.pathname!="/"?window.location.pathname.replace(".html",""):"page-index";
$(".subMenu_itemLink").each(function(){var c,b;
c=$(this)[0].hasAttribute("href")?$(this).attr("href").replace(".html",""):"";
if(c.indexOf(a)>=0){b=$(this).closest(".subMenu_singleContainer.js-menuOpen").attr("data-menu");
$(".mainMenu_item.basicTransition.js-menuOpen.js-menuBorder[data-menu='"+b+"']").addClass("current_entryMenu")
}});
$(".mainMenu_item").each(function(){var b;
b=$(this)[0].hasAttribute("href")?$(this).attr("href").replace(".html",""):"";
if(b.indexOf(a)>=0){$(this).addClass("current_entryMenu")
}})
}};
$(header.init);
var footer={bodyElement:$("body"),footerArrow:$(".footerArrow"),menuFooter:$(".menuFooter_container"),footerElement:$("#footer"),menuFooterHeight:"",footerArrowMove:"",accordionItem:$(".menuFooter_container .subMenu_itemGroup"),footerHeight:"",init:function(){footer.footerHeight=footer.footerElement.innerHeight();
footer.menuFooter.css("height",footer.footerHeight);
footer.footerAccordion();
footer.arrowMove();
footer.menuFooterHeight=footer.menuFooter.outerHeight();
footer.footerArrowMove=footer.menuFooterHeight-130
},footerAccordion:function(){footer.accordionItem.click(function(b){b.preventDefault();
var a=$(this);
if(a.hasClass("open")){footer.accordionItem.removeClass("open").addClass("close");
a.removeClass("open").addClass("close")
}else{footer.accordionItem.removeClass("open").addClass("close");
a.addClass("open").removeClass("close")
}var d=$(".menuFooter_container .subMenu_itemGroup.open").find(".accordionItem");
var c=$(".menuFooter_container .subMenu_itemGroup.close").find(".accordionItem");
TweenMax.to(d,0.3,{height:"auto",opacity:1,visibility:"visible",ease:Cubic.easeInOut});
TweenMax.to(c,0.3,{height:0,opacity:0,visibility:"hidden",ease:Cubic.easeInOut});
return false
})
},menuFooterAnimationTimeline:function(){var a=footer.footerArrow.hasClass("open");
if(a==true){TweenMax.to(footer.menuFooter,0.35,{y:0,ease:Cubic.easeInOut});
TweenMax.to(footer.footerArrow,0.4,{y:-footer.footerArrowMove,rotationX:"-=180_cw",ease:Cubic.easeInOut})
}else{TweenMax.to(footer.menuFooter,0.4,{y:footer.menuFooterHeight,ease:Cubic.easeInOut});
TweenMax.to(footer.footerArrow,0.35,{y:0,rotationX:"0_cw",ease:Cubic.easeInOut})
}},arrowMove:function(){footer.footerArrow.click(function(){var a=$(this);
a.toggleClass("open");
footer.menuFooterAnimationTimeline()
})
}};
$(footer.init);
$(function(){$("#email_iscr_header").attr("placeholder","INSERISCI LA TUA MAIL");
$("#email_iscr_header").keypress(function(b){var a=b.which;
if(a==13){submitNewsletterHeader()
}});
$("#eveningNewsSubmitHeader").on("click",function(){submitNewsletterHeader()
});
$("#email_iscr_footer").attr("placeholder","INSERISCI LA TUA MAIL");
$("#email_iscr_footer").keypress(function(b){var a=b.which;
if(a==13){submitNewsletterFooter()
}});
$("#eveningNewsSubmitFooter").on("click",function(){submitNewsletterFooter()
});
$(".searchSubmit").on("click",function(){$(this).parent().find("form").submit()
})
});
function submitNewsletterHeader(){var a=$("#email_iscr_header").val();
if(validateMail(a)){$("#email_iscr_header").removeClass("error-evn");
var b={email:a,fc:$("#eveningNews_check-header").is(":checked")?"Y":"N",tipo:"evening"};
showLoadingModal();
$.post("/Newsletters/registrationWMA.do",b,function(c){closeLoadingModal();
if(c.result=="OK"){}window.location.href="/tecnologia/iscriviti-eveningnews-thankyou.html"
})
}else{$("#email_iscr_header").addClass("error-evn")
}return false
}function submitNewsletterFooter(){var a=$("#email_iscr_footer").val();
if(validateMail(a)){$("#email_iscr_footer").removeClass("error-evn");
var b={email:a,fc:$("#eveningNews_check-footer").is(":checked")?"Y":"N",tipo:"evening"};
showLoadingModal();
$.post("/Newsletters/registrationWMA.do",b,function(c){closeLoadingModal();
if(c.result=="OK"){}window.location.href="/tecnologia/iscriviti-eveningnews-thankyou.html"
})
}else{$("#email_iscr_footer").addClass("error-evn")
}return false
}var validateMail=function(a){if(a==""){return false
}if(a.indexOf("@")==-1){return false
}if(a.indexOf(".")==-1){return false
}return true
};
jQuery.jqURL={url:function(a){a=jQuery.extend({win:window},a);
return a.win.location.href
},loc:function(a,b){b=jQuery.extend({win:window,w:500,h:500,wintype:"_top"},b);
if(!b.t){b.t=screen.height/2-b.h/2
}if(!b.l){b.l=screen.width/2-b.w/2
}if(b.wintype=="_top"){b.win.location.href=a
}else{open(a,b.wintype,"width="+b.w+",height="+b.h+",top="+b.t+",left="+b.l+",scrollbars,resizable")
}return
},qs:function(b){b=jQuery.extend({ret:"string",win:window},b);
if(b.ret=="string"){return jQuery.jqURL.url({win:b.win}).split("?")[1]
}else{if(b.ret=="object"){var a={};
var e=jQuery.jqURL.url({win:b.win}).split("?")[1];
if(e){var c=e.split("&");
for(i=0;
i<c.length;
i++){var d=c[i].split("=");
a[d[0]]=d[1]
}}return a
}}},strip:function(e){e=jQuery.extend({keys:"",win:window},e);
if(jQuery.jqURL.url().indexOf("?")==-1){return jQuery.jqURL.url({win:e.win})
}else{if(!e.keys){return jQuery.jqURL.url({win:e.win}).split("?")[0]
}else{var a=jQuery.jqURL.qs({ret:"object",win:e.win});
var b=0;
var d=jQuery.jqURL.url({win:e.win}).split("?")[0]+"?";
var c="";
for(var f in a){if(e.keys.indexOf(f)==-1){c=(b)?"&":"";
d=d+c+f+"="+a[f];
b++
}}return d
}}},get:function(b,a){a=jQuery.extend({win:window},a);
qsobj=jQuery.jqURL.qs({ret:"object",win:a.win});
return qsobj[b]
},set:function(h,e){e=jQuery.extend({win:window},e);
var a=jQuery.jqURL.qs({ret:"object",win:e.win});
for(var g in h){a[g]=h[g]
}var f="";
var b=0;
var d="";
for(var c in a){d=(b)?"&":"";
f=f+d+c+"="+a[c];
b++
}return jQuery.jqURL.strip({win:e.win})+"?"+f
}};
var CryptoJS=CryptoJS||function(y,o){var c={},u=c.lib={},q=function(){},x=u.Base={extend:function(b){q.prototype=this;
var e=new q;
b&&e.mixIn(b);
e.hasOwnProperty("init")||(e.init=function(){e.$super.init.apply(this,arguments)
});
e.init.prototype=e;
e.$super=this;
return e
},create:function(){var b=this.extend();
b.init.apply(b,arguments);
return b
},init:function(){},mixIn:function(b){for(var e in b){b.hasOwnProperty(e)&&(this[e]=b[e])
}b.hasOwnProperty("toString")&&(this.toString=b.toString)
},clone:function(){return this.init.prototype.extend(this)
}},d=u.WordArray=x.extend({init:function(b,e){b=this.words=b||[];
this.sigBytes=e!=o?e:4*b.length
},toString:function(b){return(b||v).stringify(this)
},concat:function(f){var j=this.words,g=f.words,h=this.sigBytes;
f=f.sigBytes;
this.clamp();
if(h%4){for(var e=0;
e<f;
e++){j[h+e>>>2]|=(g[e>>>2]>>>24-8*(e%4)&255)<<24-8*((h+e)%4)
}}else{if(65535<g.length){for(e=0;
e<f;
e+=4){j[h+e>>>2]=g[e>>>2]
}}else{j.push.apply(j,g)
}}this.sigBytes+=f;
return this
},clamp:function(){var b=this.words,e=this.sigBytes;
b[e>>>2]&=4294967295<<32-8*(e%4);
b.length=y.ceil(e/4)
},clone:function(){var b=x.clone.call(this);
b.words=this.words.slice(0);
return b
},random:function(f){for(var g=[],e=0;
e<f;
e+=4){g.push(4294967296*y.random()|0)
}return new d.init(g,f)
}}),z=c.enc={},v=z.Hex={stringify:function(g){var k=g.words;
g=g.sigBytes;
for(var e=[],j=0;
j<g;
j++){var h=k[j>>>2]>>>24-8*(j%4)&255;
e.push((h>>>4).toString(16));
e.push((h&15).toString(16))
}return e.join("")
},parse:function(f){for(var h=f.length,e=[],g=0;
g<h;
g+=2){e[g>>>3]|=parseInt(f.substr(g,2),16)<<24-4*(g%8)
}return new d.init(e,h/2)
}},w=z.Latin1={stringify:function(f){var h=f.words;
f=f.sigBytes;
for(var e=[],g=0;
g<f;
g++){e.push(String.fromCharCode(h[g>>>2]>>>24-8*(g%4)&255))
}return e.join("")
},parse:function(f){for(var h=f.length,e=[],g=0;
g<h;
g++){e[g>>>2]|=(f.charCodeAt(g)&255)<<24-8*(g%4)
}return new d.init(e,h)
}},a=z.Utf8={stringify:function(b){try{return decodeURIComponent(escape(w.stringify(b)))
}catch(e){throw Error("Malformed UTF-8 data")
}},parse:function(b){return w.parse(unescape(encodeURIComponent(b)))
}},t=u.BufferedBlockAlgorithm=x.extend({reset:function(){this._data=new d.init;
this._nDataBytes=0
},_append:function(b){"string"==typeof b&&(b=a.parse(b));
this._data.concat(b);
this._nDataBytes+=b.sigBytes
},_process:function(j){var p=this._data,e=p.words,n=p.sigBytes,m=this.blockSize,k=n/(4*m),k=j?y.ceil(k):y.max((k|0)-this._minBufferSize,0);
j=k*m;
n=y.min(4*j,n);
if(j){for(var l=0;
l<j;
l+=m){this._doProcessBlock(e,l)
}l=e.splice(0,j);
p.sigBytes-=n
}return new d.init(l,n)
},clone:function(){var b=x.clone.call(this);
b._data=this._data.clone();
return b
},_minBufferSize:0});
u.Hasher=t.extend({cfg:x.extend(),init:function(b){this.cfg=this.cfg.extend(b);
this.reset()
},reset:function(){t.reset.call(this);
this._doReset()
},update:function(b){this._append(b);
this._process();
return this
},finalize:function(b){b&&this._append(b);
return this._doFinalize()
},blockSize:16,_createHelper:function(b){return function(f,e){return(new b.init(e)).finalize(f)
}
},_createHmacHelper:function(b){return function(e,g){return(new A.HMAC.init(b,g)).finalize(e)
}
}});
var A=c.algo={};
return c
}(Math);
(function(){var f=CryptoJS,a=f.lib,d=a.WordArray,c=a.Hasher,b=[],a=f.algo.SHA1=c.extend({_doReset:function(){this._hash=new d.init([1732584193,4023233417,2562383102,271733878,3285377520])
},_doProcessBlock:function(r,l){for(var u=this._hash.words,p=u[0],q=u[1],s=u[2],m=u[3],o=u[4],v=0;
80>v;
v++){if(16>v){b[v]=r[l+v]|0
}else{var t=b[v-3]^b[v-8]^b[v-14]^b[v-16];
b[v]=t<<1|t>>>31
}t=(p<<5|p>>>27)+o+b[v];
t=20>v?t+((q&s|~q&m)+1518500249):40>v?t+((q^s^m)+1859775393):60>v?t+((q&s|q&m|s&m)-1894007588):t+((q^s^m)-899497514);
o=m;
m=s;
s=q<<30|q>>>2;
q=p;
p=t
}u[0]=u[0]+p|0;
u[1]=u[1]+q|0;
u[2]=u[2]+s|0;
u[3]=u[3]+m|0;
u[4]=u[4]+o|0
},_doFinalize:function(){var k=this._data,l=k.words,g=8*this._nDataBytes,j=8*k.sigBytes;
l[j>>>5]|=128<<24-j%32;
l[(j+64>>>9<<4)+14]=Math.floor(g/4294967296);
l[(j+64>>>9<<4)+15]=g;
k.sigBytes=4*l.length;
this._process();
return this._hash
},clone:function(){var g=c.clone.call(this);
g._hash=this._hash.clone();
return g
}});
f.SHA1=c._createHelper(a);
f.HmacSHA1=c._createHmacHelper(a)
})();
jQuery.cookie=function(b,j,m){if(typeof j!="undefined"){m=m||{};
if(j===null){j="";
m=$.extend({},m);
m.expires=-1
}var e="";
if(m.expires&&(typeof m.expires=="number"||m.expires.toUTCString)){var f;
if(typeof m.expires=="number"){f=new Date();
f.setTime(f.getTime()+(m.expires*24*60*60*1000))
}else{f=m.expires
}e="; expires="+f.toUTCString()
}var l=m.path?"; path="+(m.path):"";
var g=m.domain?"; domain="+(m.domain):"";
var a=m.secure?"; secure":"";
document.cookie=[b,"=",encodeURIComponent(j),e,l,g,a].join("")
}else{var d=null;
if(document.cookie&&document.cookie!=""){var k=document.cookie.split(";");
for(var h=0;
h<k.length;
h++){var c=jQuery.trim(k[h]);
if(c.substring(0,b.length+1)==(b+"=")){d=decodeURIComponent(c.substring(b.length+1));
break
}}}return d
}};
function jsonp_request(b){var c=document.getElementsByTagName("head")[0];
var a=document.createElement("SCRIPT");
a.type="text/javascript";
a.src=b;
c.appendChild(a)
}function getAbsoluteUrl(b,a,c){var d=document.location.href;
var f="http";
if(a!=undefined){if(a){f="http"
}}if(d.indexOf("https://")!=-1){f="https"
}else{if(c!=undefined){if(c){f="https"
}}}var e="";
if(d.indexOf("caem.")!=-1){e=f+"://caem.www.sky.it"+b
}else{if(d.indexOf("preaem.")!=-1){e=f+"://preaem.www.sky.it"+b
}else{if(d.indexOf("applicazioni.")!=-1){e=f+"://applicazioni.sky.it"+b
}else{e=f+"://www.sky.it"+b
}}}return e
}var rememberFlag=1;
function showLoginProcessError(){jQuery("#username").addClass("error");
jQuery("#password").addClass("error");
jQuery("#errorOnLogin").show()
}function showLoginErrorUserInactive(){jQuery("#username").addClass("error");
jQuery("#password").addClass("error");
jQuery("#errorOnLoginUSERINACTIVE").show()
}function showLoginErrorUserInactiveNoMoreActivable(){jQuery("#username").addClass("error");
jQuery("#password").addClass("error");
jQuery("#errorOnLoginUSERINACTIVENOMOREACTIVABLE").show()
}function showLoginErrorWaitingNewEmailConfirm(){jQuery("#username").addClass("error");
jQuery("#password").addClass("error");
jQuery("#errorOnLoginWAITING_NEW_EMAIL_CONFIRM").show()
}function showLoginErrorPreregCredentials(){jQuery("#username").addClass("error");
jQuery("#password").addClass("error");
jQuery("#errorOnLoginPREREG_CREDENTIALS").show()
}function resetLoginForms(){jQuery("#username").removeClass("error");
jQuery("#password").removeClass("error");
jQuery("#emailForUsername").removeClass("error");
jQuery("#username").val("");
jQuery("#password").val("");
jQuery("#emailForUsername").val("")
}function setRememberFlag(a){if(a.checked==true){rememberFlag=0
}else{rememberFlag=1
}}function getNewP(d,a){var c=CryptoJS.SHA1(d);
var b=a+"_"+c;
return CryptoJS.SHA1(b)
}function preLoginResult(b){var a=b[0].r;
if(a==0){submitLoginForm2(b[0].t,b[0].s)
}else{closeLoadingModal();
showLoginProcessError()
}}function submitLoginForm(){var e=jQuery("#username").val();
var a=jQuery("#password").val();
var d=false;
var b=false;
e=jQuery.trim(e);
if(e.length==0){jQuery("#username").addClass("error");
d=false
}else{jQuery("#username").removeClass("error");
d=true;
d=true
}if(a.length==0){jQuery("#password").addClass("error");
b=false
}else{jQuery("#password").removeClass("error");
b=true
}if((d==false)||(b==false)){return
}if(typeof checkLoginCaptchaValue!=="undefined"&&!checkLoginCaptchaValue()){return
}var c=getAbsoluteUrl("/ReSky/preLoginJSONP",false,true);
c=c+"?u="+CryptoJS.SHA1(jQuery("#username").val());
showLoadingModal();
jsonp_request(c)
}function submitLoginForm2(c,d){var g=jQuery("#username").val();
var b=jQuery("#password").val();
var a="";
if(typeof getLoginCaptchaValue!=="undefined"){a=getLoginCaptchaValue()
}var f="/ReSky/login2JSONP";
if(typeof getLoginCaptchaUrl!=="undefined"){f=getLoginCaptchaUrl()
}var e=getAbsoluteUrl(f,false,true);
e=e+"?username="+encodeURIComponent(jQuery("#username").val().trim())+"&password="+getNewP(jQuery("#password").val(),d)+"&rememberFlag="+rememberFlag+"&url="+encodeURIComponent(window.location.href)+"&ref="+encodeURIComponent(document.referrer)+"&timestamp="+c+"&recaptchaResponse="+a;
showLoadingModal();
jsonp_request(e);
if(typeof resetLoginCaptchaValue!=="undefined"){resetLoginCaptchaValue()
}}function fullSkyLogout(){wscLogout();
setTimeout("reskyLogout()",1000)
}function wscLogout(){$.ajax({crossDomain:true,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",url:getSkyWSCUrl("/skyportal/servlet/logout.do?t=P",true),dataType:"jsonp",jsonpCallback:"wsclogoutcb"}).fail(function(){})
}function wsclogoutcb(a){}function reskyLogout(){var a=getAbsoluteUrl("/ReSky/logout.do?t=P&page="+window.location.host+window.location.pathname,false);
$.ajax({crossDomain:true,type:"GET",contentType:"application/x-www-form-urlencoded",url:a,dataType:"jsonp",jsonpCallback:"skylogoutcb"}).done(function(b){var c=b;
if($.cookie("PETERWITT")!=null){$("body").append("<iframe src="+getAbsoluteUrl("/ReSky/logout.do?t=P",false)+"></iframe>");
setTimeout(function(){window.location.reload()
},1000)
}else{window.location.reload()
}})
}function skylogoutcb(a){}function trackAutoLoginAdFormSkyIT(){var g="0";
var c="1";
var b="/";
var a=".sky.it";
var f=$.cookie("AUTOLOGINSTATUS");
if(g==f){console.log("::trackAutoLoginAdFormSkyIT:: is autologin access!");
var e=$.cookie("ext");
try{adf.createOrder({sv13:e});
adf.track(124076,7411443)
}catch(d){console.log("::trackAutoLoginAdFormSkyIT:: "+d)
}$.cookie("AUTOLOGINSTATUS",c,{domain:a,path:b});
console.log("::trackAutoLoginAdFormSkyIT:: autologin adf traced!")
}}function checkSession(){if($.cookie("PETERWITT")){var a="/ReSky/pwlogin.do";
$.ajax({url:a,method:"GET",success:function(b){setTimeout(trackAutoLoginAdFormSkyIT,1000);
$res=$(b);
if($res.find("#ajaxLoginState").val()!="login"){var c="/ReSky/data.do";
$.getJSON(c,function(f){if(f.name!=undefined){var d=getAbsoluteUrl("/etc/designs/skyit/img/header/userIco.png");
var g=f.profileimg.length>0?f.profileimg:d;
var h=getAbsoluteUrl("/etc/designs/skyit/img/header/id.png");
if(typeof customManageLoggedUserType!=="undefined"){customManageLoggedUserType(f)
}if(f.customer!=undefined&&f.customer=="C"){var e=new Image();
e.onload=function(){$("img.userIcon").attr("src",g);
$(".userIo").addClass("logged");
$("div.photoLogin").css("background-image","url('"+g+"')");
if(g==d){$("div.loggedPanel_photo").removeClass("logged").css("background-image","url('"+h+"')")
}else{$("div.loggedPanel_photo").addClass("logged").css("background-image","url('"+g+"')")
}};
e.error=function(){console.log("no profile icon");
$("img.userIcon").attr("src",d);
$(".userIo").removeClass("logged");
$("div.photoLogin").css("background-image","url('"+d+"')");
$("div.loggedPanel_photo").removeClass("logged").css("background-image","url('"+h+"')")
};
e.src=g;
setTimeout(function(){var j=jQuery("body").attr("data-status");
if(j=="prospect"){jQuery(".js-switch").trigger("click");
if(window.location.href!="https://web.archive.org/web/20171123134910/http://www.sky.it/"&&window.location.href!="https://web.archive.org/web/20171123134910/https://www.sky.it/"){jQuery(".switchTextItem").trigger("click")
}}},3000)
}else{$("img.userIcon").attr("src",d);
$(".userIo").removeClass("logged");
$("div.photoLogin").css("background-image","url('"+d+"')");
$("div.loggedPanel_photo").removeClass("logged").css("background-image","url('"+h+"')")
}$("#loggedPanel").show();
if($("#hideCTAAbbonarsi").length>0){$(".safeArea .mainMenu_itemBtn.abbonarsiBtn").addClass("hideCTA");
if($.cookie("ext")){$(".showPerAbbonarsi").removeClass("showPerAbbonarsi")
}$("#topbar.redazionali .mainMenu_itemBtn.abbonarsiBtn").addClass("hideCTA");
$(".menuMobile_container .mainMenu_itemBtn.abbonarsiBtn.basicTransition").addClass("hideCTA")
}if(typeof(initRTD)!="undefined"&&typeof(rtdStarted)!="undefined"&&rtdStarted==false){initRTD()
}$("#notLoggedPanel").hide();
$("#topbar.redazionali").removeClass("user-not-logged").addClass("user-logged");
$(".mainMenuLogin").addClass("logged");
$(".safeArea .mainMenu_itemBtn.loginBtn").hide();
$("#header").removeClass("user-not-logged").addClass("user-logged");
$(".loggedPanel_name").html(f.name+" "+f.surname);
$(".loginName").html("Ciao, "+f.name)
}else{$("#loggedPanel").hide();
$("#notLoggedPanel").show();
$(".mainMenuLogin").removeClass("logged");
$(".userIo").removeClass("logged");
$("#header").removeClass("user-logged").addClass("user-not-logged");
$("#header").removeClass("user-logged").addClass("user-not-logged");
$("#topbar.redazionali").removeClass("user-logged").addClass("user-not-logged");
$(".loginBtn").show();
if($.cookie("ext")){$(".showPerAbbonarsi").removeClass("showPerAbbonarsi")
}}})
}else{$("#loggedPanel").hide();
$("#notLoggedPanel").show();
$(".mainMenuLogin").removeClass("logged");
$(".userIo").removeClass("logged");
$("#header").removeClass("user-logged").addClass("user-not-logged");
$("#topbar.redazionali").removeClass("user-logged").addClass("user-not-logged");
$(".loginBtn").show();
if($.cookie("ext")){$(".showPerAbbonarsi").removeClass("showPerAbbonarsi")
}}},error:function(){$("#loggedPanel").hide();
$("#notLoggedPanel").show();
$(".mainMenuLogin").removeClass("logged");
$(".userIo").removeClass("logged");
$("#header").removeClass("user-logged").addClass("user-not-logged");
$(".loginBtn").show();
if($.cookie("ext")){$(".showPerAbbonarsi").removeClass("showPerAbbonarsi")
}}})
}else{$("#header").removeClass("user-logged").addClass("user-not-logged");
$("#topbar.redazionali").removeClass("user-logged").addClass("user-not-logged");
if($.cookie("ext")){$(".showPerAbbonarsi").removeClass("showPerAbbonarsi")
}}}var tagBody="(?:[^\"'>]|\"[^\"]*\"|'[^']*')*";
var tagOrComment=new RegExp("<(?:!--(?:(?:-*[^->])*--+|-?)|script\\b"+tagBody+">[\\s\\S]*?<\/script\\s*|style\\b"+tagBody+">[\\s\\S]*?</style\\s*|/?[a-z]"+tagBody+")>","gi");
function removeTags(a){var b;
do{b=a;
a=a.replace(tagOrComment,"")
}while(a!==b);
return a.replace(/</g,"&lt;")
}function submitRecoverUsernameForm(){var g=jQuery("#emailForUsername").val();
console.log(g);
g=removeTags(g);
var b=g;
g=jQuery.trim(g);
if(g.length==0){var d=jQuery("#emailForUsername").attr("class");
jQuery("#emailForUsername").attr("class",d+" error");
return
}var a=g.split("@");
var f=g.indexOf("@");
var c=g.lastIndexOf(".");
if((f==-1)||(c==-1)||(a[0].length==0)){var d=jQuery("#emailForUsername").attr("class");
jQuery("#emailForUsername").attr("class",d+" error");
parseRecoverUsernameResult([{recoverUsernameResult:"2"}]);
return
}if(f>c){var d=jQuery("#emailForUsername").attr("class");
jQuery("#emailForUsername").attr("class",d+" error");
parseRecoverUsernameResult([{recoverUsernameResult:"2"}]);
return
}var e=getAbsoluteUrl("/ReSky/recuperaDati.do");
e=e+"?email="+g;
jsonp_request(e)
}function parseLoginResult(c){jQuery("#errorOnLoginUSERINACTIVE").hide();
jQuery("#errorOnLoginUSERINACTIVENOMOREACTIVABLE").hide();
jQuery("#errorOnLoginWAITING_NEW_EMAIL_CONFIRM").hide();
jQuery("#errorOnLogin").hide();
var b=c[0].loginResult;
if(b==0){if(typeof _satellite!=="undefined"){_satellite.track("login")
}if(getUrlParameter("selfCareGoTo")!=undefined){if(getHostName(getUrlParameter("selfCareGoTo"))==null||getHostName(getUrlParameter("selfCareGoTo")).substr(-".sky.it".length)===".sky.it"){goAhead(getUrlParameter("selfCareGoTo"))
}else{goAhead(getAbsoluteUrl(""))
}}else{if(getUrlParameter("forward")!=undefined){if(getHostName(getUrlParameter("forward"))==null||getHostName(getUrlParameter("forward")).substr(-".sky.it".length)===".sky.it"){goAhead(getUrlParameter("forward"))
}else{goAhead(getAbsoluteUrl(""))
}}else{goAhead(c[0].urlToGo)
}}}else{if(b==2||b==7){if(document.location.hostname=="skygo.sky.it"){goAhead(c[0].urlToGo)
}else{var a=jQuery("#username").val();
closeLoadingModal();
jQuery("#username").val(a);
jQuery("#contact-form-step1 > p").html(modifyPwdIfWeakMsg);
showEditPasswordModal()
}}else{if(b==1){closeLoadingModal();
showLoginErrorUserInactive()
}else{if(b==5){closeLoadingModal();
showLoginErrorUserInactiveNoMoreActivable()
}else{if(b==6){closeLoadingModal();
window.location.href=getAbsoluteUrl("/it/registrati_sms.html")
}else{if(b==8){closeLoadingModal();
showLoginErrorWaitingNewEmailConfirm()
}else{if(b==9){closeLoadingModal();
window.location.href=c[0].updatePwdPage
}else{if(b==10){closeLoadingModal();
showLoginErrorPreregCredentials()
}else{if(b==11||b==12){if(document.location.hostname=="skygo.sky.it"){goAhead(c[0].urlToGo)
}else{closeLoadingModal();
showEditMailModal();
jQuery("#mailEditSubmit").click(function(){goAheadWithDollarEmail(c[0].urlToGo)
});
jQuery("#editCancel_editBox").click(function(){goAhead()
})
}}else{liveChatTrigger(liveChatTriggerRegOverlay);
closeLoadingModal();
showLoginProcessError()
}}}}}}}}}if(c[0].askCaptcha===true){showCaptchaLoginAttempts()
}else{hideCaptchaLoginAttempts()
}}function getUrlParameter(c,b){if(!b){b=location.href
}c=c.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");
var a="[\\?&]"+c+"=([^&#]*)";
var e=new RegExp(a);
var d=e.exec(b);
return d==null?null:d[1]
}function getHostName(b){var c=decodeURIComponent(b);
var a=c.match(/:\/\/(www[0-9]?\.)?(.[^/:]+)/i);
if(a!=null&&a.length>2&&typeof a[2]==="string"&&a[2].length>0){return a[2]
}else{return null
}}function trackLoginAdFormSkyIT(){var b=$.cookie("ext");
try{adf.createOrder({sv13:b});
adf.track(124076,7411443)
}catch(a){}}function trackPreLoginAdFormSkyIT(){try{adf.track(124076,7413796)
}catch(a){}}function goAhead(a){if(document.location.hostname.indexOf("www.sky.it")>-1&&location.pathname=="/"){var b="/ReSky/data.do";
$.getJSON(b,function(c){if(c!=null&&c.customer=="C"){if(a!=undefined&&a.indexOf("questreg")>-1){window.location.href=a
}else{redirectToWSC()
}}else{window.location.reload()
}})
}else{if(a!=undefined){if(location.href.indexOf("assistenza/risolvi/")<0){window.location=decodeURIComponent(a)
}else{checkSession();
checkLogin();
checkProspect();
check4Cookie(true);
$("#stdLoadingModal").hide();
if(typeof glb_isEndTsWithConclusioneKo!="undefined"&&glb_isEndTsWithConclusioneKo){initChat()
}closeLoadingModal()
}}else{if(location.href.indexOf("recover-password-page")>-1){window.location.href=getAbsoluteUrl("")
}else{if(location.href.indexOf("assistenza/risolvi/")<0){window.location.reload()
}else{checkSession();
checkLogin();
checkProspect();
check4Cookie(true);
$("#stdLoadingModal").hide();
if(typeof glb_isEndTsWithConclusioneKo!="undefined"&&glb_isEndTsWithConclusioneKo){initChat();
$("#boxEmail").show();
$("#chat .content").show();
$("#chat").show()
}closeLoadingModal()
}}}}}function goAheadWithDollarEmail(a){if(a!=undefined){window.location=a
}else{window.location.reload()
}}function parseRecoverUsernameResult(c){var b=c[0].recoverUsernameResult;
var a=jQuery("#emailForUsername").val();
a=removeTags(a);
if(b==0){jQuery("#dataForgot").hide();
jQuery("#dataSuccess").show();
if(location.href.indexOf("/it/recupera-credenziali")){a=jQuery("#email").val();
jQuery(".form-container.step1").css("display","none");
jQuery(".form-container.stepSuccess").css("display","block");
jQuery(".form-buttons.right").css("display","none");
jQuery(".form-footer.stepSuccess").css("display","block");
jQuery("#textbox1").html("<p>Se l'indirizzo e-mail che hai inserito<br><br><b> "+a+"</b><br><br> &egrave; presente sui nostri sistemi, riceverai a breve le istruzioni per recuperare i dati del tuo Sky iD.</p>")
}}else{if(b>0){if(b==1){if(location.href.indexOf("/it/recupera-credenziali")){$("#successo").text("Email non trovata in archivio")
}}if(b==2){if(location.href.indexOf("/it/recupera-credenziali")){$("#errore").text("Errore Tecnico")
}if(typeof liveChatTrigger=="function"){liveChatTrigger(liveChatTriggerCredenziali)
}}}}}function showLoadingModal(){var b=$(document).height();
var d=$(window).width();
$("#stdLoadingModal").css({width:d,height:b});
var c=$(window).height();
var a=$(window).width();
$("#stdLoadingBox").css("top",(c/2-$("#loginLoadingBox").height()/2)-100);
$("#stdLoadingBox").css("left",(a/2-$("#loginLoadingBox").width()/2)-50);
$("#stdLoadingModal").fadeIn(100);
$("#stdLoadingModal").fadeTo("slow",0.8)
}function closeLoadingModal(){$("#stdLoadingModal").fadeOut(100)
}$("#searchInput-header").keypress(function(b){var a=b.which;
if(a==13){if($(this).parent().find("input[name='query']").attr("value")!=""){$(this).parent().submit()
}return false
}});
$("#searchInput-footer").keypress(function(b){var a=b.which;
if(a==13){if($(this).parent().find("input[name='query']").attr("value")!=""){$(this).parent().submit()
}return false
}});
$("#mobileSearch").on("tap",function(){if($(this).parent().find("input[name='query']").attr("value")!=""){$(this).parent().submit()
}});
var liveChatTrigger=function(b){if(b.start++==b.end){if(b.liveagent_chatType=="SKYID_RECUPERO_ID"){if(typeof(showChatInvite)!="function"){$.getScript("/etc/designs/skysupport/clientlibs/js/main/CDeploymentV29.js",function(){$.getScript("/etc/designs/skyit/chat/chat.js",function(){$("<link/>",{rel:"stylesheet",type:"text/css",href:"/etc/designs/skyit/chat/chat.css"}).appendTo("head");
$.getScript("/etc/designs/skysupport/clientlibs/js/main/Trial_DTH.js",function(){startChatInvite(b);
liveagent_chatVars.liveagent_recovery=false
})
})
})
}else{try{liveagent_chatVars=new Object();
startChatInvite(b);
liveagent_chatVars.liveagent_recovery=false
}catch(a){}}}else{jQuery.ajax({url:"https://web.archive.org/web/20171123134910/https://va.sky.it/eva.min.js",dataType:"script",success:function(){console.log("apro la chat EVA");
EVA.open()
},async:true,error:function(){console.log("errore durante apertura chat EVA")
}})
}}};
if(typeof(liveagent_chatVars)=="undefined"){var liveagent_chatVars=new Object()
}var startChatInvite=function(a){liveagent_chatVars.liveagent_section=a.liveagent_section;
liveagent_chatVars.liveagent_chatType=a.liveagent_chatType;
liveagent_chatVars.templateOnWeb=true;
showChatInvite();
if(typeof startCheckChatParameter!=="undefined"){startCheckChatParameter()
}};
var liveChatTriggerRegOverlay={start:1,end:3,liveagent_chatType:"SKYID_LOGIN",liveagent_section:"Pagina Sky iD registrazione'"};
var liveChatTriggerCredenziali={start:1,end:2,liveagent_chatType:"SKYID_RECUPERO_ID",liveagent_section:"Pagina Sky iD  recupero credenziali"};
var BrowserDetect={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser";
this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version";
this.OS=this.searchString(this.dataOS)||"an unknown OS"
},searchString:function(d){for(var a=0;
a<d.length;
a++){var b=d[a].string;
var c=d[a].prop;
this.versionSearchString=d[a].versionSearch||d[a].identity;
if(b){if(b.indexOf(d[a].subString)!=-1){return d[a].identity
}}else{if(c){return d[a].identity
}}}},searchVersion:function(b){var a=b.indexOf(this.versionSearchString);
if(a==-1){return
}return parseFloat(b.substring(a+this.versionSearchString.length+1))
},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};
BrowserDetect.init();
function redirectToWSC(){$.ajax({url:"https://web.archive.org/web/20171123134910/https://abbonamento.sky.it/CheckFaiDaTe/index.html",success:function(){window.location.href=getSkyWSCUrl("/skyportal/faces/faiDaTe",true)
},error:function(){window.location.reload()
},async:false})
}$(document).ready(function(){console.log("Check User Session");
$(checkSession());
$(window).scroll(function(){if(typeof header!="undefined"&&(window.location.href.indexOf("www.sky.it")>-1||window.location.href.indexOf("skyit/it/")>-1)){header.topBarMove()
}})
});
$.fn.serializeObject=function(){var c={};
var b=this.serializeArray();
$.each(b,function(){if(c[this.name]){if(!c[this.name].push){c[this.name]=[c[this.name]]
}c[this.name].push(this.value||"")
}else{c[this.name]=this.value||""
}});
return c
};
var okMsg="Ok!";
var passwordRequiredMsg="Password obbligatoria";
var passwordMinLengthMsg="La password deve essere composta da almeno 8 caratteri";
var passwordNotEqualMsg="Le password non coincidono";
var passwordOkMessage="Ok";
var password2RequiredMsg="Inserire una password di conferma";
var passwordNoConformMsg="La password inserita non rispetta i requisiti di sicurezza.";
var passwordNotMatchWordsMsg="La password non pu contenere le parole admin,root,forum o enable";
var emailRequiredMsg="E-mail obbligatoria";
var emailConfRequiredMsg="Conferma E-mail obbligatoria";
var emailNotValidMsg="E-mail non valida";
var emailTooLong="Lindirizzo mail non pu&ograve; superare i 50 caratteri";
var emailOkMessage="Ok";
var emailAlreadyExistMsg="Email gi&agrave; presente.";
var emailNotEqualMsg="Le E-mail non coincidono";
var fiscalCodeOkMessage="Ok";
var fiscalCodeRequiredMsg="Codice fiscale o partita iva obbligatori";
var fiscalCodeVatNotValidMsg="Codice fiscale o partita iva non validi";
var fiscalCodeNotValidMsg="Codice fiscale non valido";
var vatNotValidMsg="Partita iva non valida";
var codeOkMessage="Ok";
var capchaRequiredMsg="Captcha obbligatorio";
var capchaNotEqualMsg="Testo inserito non corretto. Prova nuovamente";
var capchaNotCorrectMsg="Captcha non corretto. Prova nuovamente";
var contractCodeRequiredMsg="Codice cliente obbligatorio";
var smcRequiredMsg="Codice cliente obbligatorio";
var customerFlagRequiredMsg="Campo obbligatorio";
var contractCodeMinLengthMsg="Codice non valido";
var contractCodeNotValidMsg="Codice non valido";
var notExisting="La combinazione tra Codice cliente e codice fiscale non  valida. Controlla i dati dell'abbonamento e prova ad inserirli nuovamente. Per assistenza chiama il Servizio Clienti al numero 199.100.400.";
var okWrongFiscalCode="La combinazione tra Codice cliente e codice fiscale non  valida. Controlla i dati dell'abbonamento e prova ad inserirli nuovamente. Per assistenza chiama il Servizio Clienti al numero 199.100.400.";
var registered="Attenzione! Il codice cliente che hai inserito risulta gi associato ad una registrazione.";
var ceased="Contratto non attivo . Per informazioni chiama il Servizio Clienti al numero 199.100.400. Puoi comunque registrarti subito come non cliente per usufruire dei servizi online di Sky.it, partecipare ai forum e ai concorsi riservati agli utenti registrati.";
var vatIrregular="Ti informiamo che la registrazione al Fai da te  riservata ai soli clienti con contratto privato, non business.";
var match_name_failed="Gentile Cliente, siamo spiacenti, la verifica dei  dati inseriti non e' andata a buon fine. Prova ad inserirli nuovamente o chiama il Servizio Clienti al 199.100.400 per maggiori informazioni";
var match_cc_failed="Codice cliente non valido. Prova ad inserirli nuovamente o chiama il Servizio Clienti al 199.100.400 per maggiori informazioni";
var match_smc_failed="Codice smart card non valido. Prova ad inserirli nuovamente o chiama il Servizio Clienti al 199.100.400 per maggiori informazioni";
var privacy1requiredMsg="Accettazione privacy obbligatoria";
var privacy2requiredMsg="Accettazione privacy obbligatoria";
var privacy3requiredMsg="Accettazione privacy obbligatoria";
var billPortabilityRequiredMsg="Campo obbligatorio";
var capRequiredMsg="Cap obbligatorio";
var capLength5Msg="Il CAP inserito deve avere 5 caratteri";
var capOnlyNumberMsg="CAP:formato non corretto";
var capOkMsg="Ok";
var surnameRequiredMsg="Cognome obbligatorio";
var surnameOkMsg="Ok";
var nameRequiredMsg="Nome obbligatorio";
var nameOkMsg="Ok";
var nameNotValidMsg="Nome non valido";
var surnameNotValidMsg="Cognome non valido";
var customerFlag2RequiredMsg="Campo obbligatorio";
var recoverUsernameNotFoundErrorMsg="Email non trovata nell'archivio";
var recoverUsernameNotValidErrorMsg="L'email inserita non  valida";
var modifyPwdIfEqualsUsernameMsg="Scegli Username e Password per i tuoi prossimi accessi a Sky.it:<br />registrandoti potrai utilizzare i servizi personalizzati della guida tv online e del Fai da te e se lo desideri entrare a far parte della nostra community.";
var modifyPwdIfWeakMsg="Gentile Cliente, la tua password  poco sicura. Ti invitiamo a modificarla con una nuova combinazione";
var mobileNumberNotValidMsg="Recapito inserito non valido";
var contractCodefiscalCodeNotValidMsgSmsPreregistration="Il  codice fiscale inserito non  corretto. Controlla il dato e prova a ad inserirlo nuovamente. Per assistenza chiama il Servizio Clienti al numero 199.100.400.";
var contractCodeVatNotValidMsg="Ti informiamo che la registrazione al Fai da te  riservata ai soli clienti con contratto privato, non business. Per informazioni chiama il Servizio Clienti al numero 199.100.400 o invia una e-mail tramite il contatta Sky.";
var contractCodeCeasedMsgForUpgrade="Contratto non attivo . Per informazioni chiama il Servizio Clienti al numero 199.100.400. ";
var contractCodeVatNotValidMsg="Ti informiamo che la registrazione al Fai da te  riservata ai soli clienti con contratto privato, non business. Per informazioni chiama il Servizio Clienti al numero 199.100.400 o invia una e-mail tramite il contatta Sky.";
var contractCodefiscalCodeNotValidMsg="La combinazione tra Codice cliente e codice fiscale non  valida. Controlla i dati dell'abbonamento e prova ad inserirli nuovamente. Per assistenza chiama il Servizio Clienti al numero 199.100.400.";
var contractCodeClosedMsg="I dati inseriti sono relativi ad un cliente chiuso.";
var skyExtraReqrequiredMsg="Campo obbligatorio";
var msisdnNotValidMsg="Numero non valido";
var requiredFielddMsg="Campo obbligatorio";
var defaultErrorMsg="Siamo spiacenti, il servizio non e' al momento disponibile. Ti invitiamo a riprovare piu' tardi. Grazie per aver utilizzato i nostri servizi on-line.";
var privacyOk="accettata";
var privacyKo="rifiutata";
var dbEmail="";
var dbName="";
var dbSurname="";
var siteKey="6Lf63OQSAAAAAHwStoYT5tBYDEH7bZm0FmCvlORq";
var headerPassRegex=/[^a-zA-Z0-9\.\-\_\(\)]/,headerPassConstraintLowerCase=/[a-z]+/,headerPassConstraintUpperCase=/[A-Z]+/,headerPassConstraintNumber=/[0-9]+/,headerPassConstraintSpecialChar=/[\!\"\#\$\%\&\'\(\)\*\+\,\-\.\/\:\;\<\=\>\?\@\[\\\]\^\{\|\}\~]+/,headerEmailRegex=/^[a-zA-Z0-9\.\-\_]+@[a-zA-Z0-9\.\-\_]+\.[a-zA-Z]+$/,headerNameSurnameRegex=/^([a-zA-Z\u00E0-\u00FC\|']+\s?)+$/,headerMonthYearRegex=/(gennaio|febbraio|marzo|aprile|maggio|giugno|luglio|agosto|settembre|ottobre|novembre|dicembre|gen|feb|mar|apr|mag|giu|lug|ago|set|ott|nov|dic)\d{2}/i,pivaRegex=/\d{11}/,msisdnRegex=/^(3)(\d{8,9})$/,headerBlackListWordRegex=/(password)/i;
var widgetIdProspectEdit,widgetIdLoginAttempts,widgetIdRecoverByMail,widgetIdRecoverPwdByMsisdn,widgetIdPwdForgotNewPwd,widgetIdMailForgotCCCF,widgetIdMailForgotSms;
var trackingChannelGlobal="WSC";
function headerCallback(){widgetIdMailForgotCCCF=grecaptcha.render("recaptchaMailForgotCCCF",{sitekey:siteKey,theme:"light",callback:recoverMailbyCCCFCallback});
widgetIdRecoverPwdByMsisdn=grecaptcha.render("recaptchaPwdForgotSms",{sitekey:siteKey,theme:"light"});
widgetIdRecoverByMail=grecaptcha.render("recaptchaPwdForgotMail",{sitekey:siteKey,theme:"light",callback:recoverByMailCallback});
widgetIdProspectEdit=grecaptcha.render("recaptchaProspectEdit",{sitekey:siteKey,theme:"light",callback:verifyProspectEditCallback});
widgetIdPwdForgotNewPwd=grecaptcha.render("recaptchaPwdForgotNewPwd",{sitekey:siteKey,theme:"light"});
widgetIdMailForgotSms=grecaptcha.render("recaptchaMailForgotSms",{sitekey:siteKey,theme:"light"})
}function manageRecaptchaApiCall(){if(typeof window.___grecaptcha_cfg=="undefined"){$.getScript("https://web.archive.org/web/20171123134910/https://www.google.com/recaptcha/api.js?onload=headerCallback&render=explicit&hl=it")
}else{headerCallback()
}}function getSkyWSCUrl(a,c){var d=document.location.href;
var f="http";
var e="";
var b;
if(d.indexOf("https://")!=-1){f="https"
}if(c){f="https"
}else{if(c==false){f="http"
}}if(d.indexOf("caem.www.sky.it")!=-1){b=f+"://collprj.abbonamento.sky.it"+a
}else{if(d.indexOf("preaem.www.sky.it")!=-1){b=f+"://collam.abbonamento.sky.it"+a
}else{b=f+"://abbonamento.sky.it"+a
}}return b
}$(function(){$(".mainMenu_container .js-loginBtn, .mainMenu_container .userIo").one("click",manageRecaptchaApiCall);
$("#new_registration_menu_link").click(function(){window.location.href=getAbsoluteUrl("/it/registrati.html",false,true)
});
$("#complete_registration_menu_link").click(function(){window.location.href=getAbsoluteUrl("/it/filtro_cliente.html",false,true)
});
$("#quest_newsletter_menu_link").click(function(){window.location.href=getAbsoluteUrl("/ReSky/dispdirect.do?forward=questreg",false,true)
});
$(".goToWSC_link").click(function(){var P=$(this).attr("data_url");
var Q=$(this).attr("data_secure");
window.location.href=getSkyWSCUrl(P,Q)
});
$(".goToRiconosciuto_link").click(function(){if(document.location.hostname.indexOf("www.sky.it")>-1&&location.pathname=="/"){var P=$(this).attr("data_url");
var Q=$(this).attr("data_secure");
window.location.href=getSkyWSCUrl(P,Q)
}else{window.location.href=getAbsoluteUrl("/it/filtro_login.html?forward="+encodeURIComponent(window.location.pathname+window.location.search),false,true)
}});
$(".mailForgot_link").click(function(){$("#login").hide();
$("#chooseMailForgot").show();
grecaptcha.reset(widgetIdMailForgotCCCF)
});
$("#viaSmsSubmit").click(function(){grecaptcha.reset(widgetIdRecoverPwdByMsisdn)
});
$(".pwdForgot_link").click(function(){$("#login").hide();
$("#pwdForgot").show();
grecaptcha.reset(widgetIdRecoverByMail)
});
$(".modify-btn").click(function(){grecaptcha.reset(widgetIdProspectEdit)
});
$("#deleteProfileSubmit").click(function(){showLoadingModal();
$(".backto-buttonsLink").hide();
var P=getAbsoluteUrl("/ReSky/smartDeleteUser.do",false,true);
$.ajax({url:P,datatype:"json",type:"POST",xhrFields:{withCredentials:true}}).done(function(Q){F(Q)
}).fail(function(R,S,Q){h()
}).always(function(){$("#deleteProfile").hide();
$(".editProfile").hide()
})
});
$(".backto-home").click(function(){location.reload()
});
function F(P){if(P&&P.result==0){$.get(getAbsoluteUrl("/ReSky/logout.do",false,true)).always(function(){closeLoadingModal()
});
$("#deleteProfileSuccess").show()
}else{h()
}}function h(){$("#deleteProfileFail").show();
$(".backto-buttonsLink").show();
closeLoadingModal()
}$("#editProspectForm input[name='name']").blur(function(P){P.preventDefault();
c($(this))
});
$("#editProspectForm input[name='name']").keypress(function(P){resetErrorMsg($(this))
});
$("#editProspectForm input[name='surname']").blur(function(P){P.preventDefault();
O($(this))
});
$("#editProspectForm input[name='surname']").keypress(function(P){resetErrorMsg($(this))
});
$("#editProspectForm input[name='email']").blur(function(P){P.preventDefault();
J($(this))
});
$("#editProspectForm input[name='email']").keypress(function(P){resetErrorMsg($(this))
});
$("#editProspectForm input[name='password']").blur(function(P){P.preventDefault();
D($(this),$("#editProspectForm input[name='email']").val())
});
$("#editProspectForm input[name='password']").keypress(function(P){resetErrorMsg($(this))
});
$("#editProspectForm input[name='password2']").blur(function(P){P.preventDefault();
I($(this),$("#editProspectForm input[name='password']"))
});
$("#editProspectForm input[name='password2']").keypress(function(P){resetErrorMsg($(this))
});
$("#setPasswordForm input[name='password']").blur(function(P){P.preventDefault();
D($(this),$("#recoverByMailForm input[name='email']").val())
});
$("#setPasswordForm input[name='password']").keypress(function(P){resetErrorMsg($(this))
});
$("#setPasswordForm input[name='password2']").blur(function(P){P.preventDefault();
I($(this),$("#setPasswordForm input[name='password']"))
});
$("#setPasswordForm input[name='password2']").keypress(function(P){resetErrorMsg($(this))
});
$("#editProspectForm").submit(function(U){U.preventDefault();
showLoadingModal();
var W=b($("#editProspectForm [name='hiddenRecaptcha']"),widgetIdProspectEdit);
var T=c($("#editProspectForm input[name='name']"));
var S=O($("#editProspectForm input[name='surname']"));
var Q=J($("#editProspectForm input[name='email']"));
var R=false;
var V=false;
var P=$("#editProspectForm input[name='password']").val();
if(P.length>0){R=u($("#editProspectForm input[name='password']"),$("#editProspectForm input[name='email']").val());
V=e($("#editProspectForm input[name='password']"),$("#editProspectForm input[name='password2']"))
}else{R=true;
V=true
}if(W&&T&&S&&Q&&R&&V){g($(this))
}else{closeLoadingModal()
}});
function g(Q){var R=$(Q).serializeObject();
if(R.password.length>0){R.password=encodeURIComponent(R.password);
delete R.password2
}else{delete R.password;
delete R.password2
}if(R.name===dbName){delete R.name
}if(R.surname===dbSurname){delete R.surname
}R.recaptchaResponse=grecaptcha.getResponse(widgetIdProspectEdit);
if(R.email!=dbEmail){R.emailNonClient=R.email
}else{delete R.email
}R.trackingChannel=trackingChannelGlobal;
showLoadingModal();
var P=getAbsoluteUrl("/ReSky/editUser.do",false,true);
$.ajax({url:P,data:R,datatype:"json",contentType:"application/x-www-form-urlencoded; charset=UTF-8",type:"POST",xhrFields:{withCredentials:true}}).done(function(S){C(S)
}).fail(function(T,U,S){k()
}).always(function(){grecaptcha.reset(widgetIdProspectEdit);
closeLoadingModal();
$("#editProspectForm input[type='password']").val("")
})
}function b(P,Q){var R=grecaptcha.getResponse(Q)!=="";
resetErrorMsg(P);
if(!R){showErrorMsg(P,capchaRequiredMsg)
}return R
}function D(Q,R){var P=$.trim(Q.val());
if(P.length>0){u(Q,R)
}}function I(Q,R){var P=$.trim(Q.val());
if(P.length>0){e(Q,R)
}}function u(S,R){resetErrorMsg(S);
var Q=$.trim(S.val());
if(Q.length<8){showErrorMsg(S,passwordMinLengthMsg);
return false
}if(Q.toLowerCase()==R.toLowerCase()){showErrorMsg(S,passwordNotUsernameMsg);
return false
}var P=0;
if(headerPassConstraintLowerCase.test(Q)){P++
}if(headerPassConstraintUpperCase.test(Q)){P++
}if(headerPassConstraintNumber.test(Q)){P++
}if(headerPassConstraintSpecialChar.test(Q)){P++
}if(P<3){showErrorMsg(S,passwordNoConformMsg);
return false
}if(headerMonthYearRegex.test(Q)){showErrorMsg(S,passwordNoConformMsg);
return false
}if(headerBlackListWordRegex.test(Q)){showErrorMsg(S,passwordNoConformMsg);
return false
}showOkMsg(S,passwordOkMessage);
return true
}function e(Q,S){resetErrorMsg(Q);
var P=$.trim(Q.val());
var R=$.trim(S.val());
if(P!=R){showErrorMsg(Q,passwordNotEqualMsg);
return false
}showOkMsg(Q);
return true
}function c(P){var Q=$.trim(P.val());
if(Q!=dbName&&dbName!=""){return s(Q,P)
}else{return true
}}function s(Q,P){if(Q){if(headerNameSurnameRegex.test(Q)){showOkMsg(P);
return true
}else{showErrorMsg(P,nameNotValidMsg);
return false
}}else{showErrorMsg(P,nameRequiredMsg);
return false
}}function O(Q){var P=$.trim(Q.val());
if(P!=dbSurname&&dbSurname!=""){return N(P,Q)
}else{return true
}}function N(Q,P){if(Q){if(headerNameSurnameRegex.test(Q)){showOkMsg(P);
return true
}else{showErrorMsg(P,surnameNotValidMsg);
return false
}}else{showErrorMsg(P,surnameRequiredMsg);
return false
}}function J(R){resetErrorMsg(R);
var P=$.trim(R.val().toLowerCase());
var Q=false;
if(P!=dbEmail){Q=H(P,R)
}else{showOkMsg(R);
Q=true
}return Q
}function B(Q){resetErrorMsg(Q);
var P=$.trim(Q.val().toLowerCase());
return H(P,Q)
}function H(Q,P){if(Q){if(Q.length<50){if(headerEmailRegex.test(Q)){showOkMsg(P);
return true
}else{showErrorMsg(P,emailNotValidMsg);
return false
}}else{showErrorMsg(P,emailTooLong);
return false
}}else{showErrorMsg(P,emailRequiredMsg);
return false
}}function l(R,Q){var P=R.val();
if(P==""){showErrorMsg(R,emailConfRequiredMsg);
return false
}else{if(P!=Q){showErrorMsg(R,emailNotEqualMsg);
return false
}else{showOkMsg(R,capOkMsg);
return true
}}}function E(X){resetErrorMsg(X);
var R=X.val();
if(R){R=$.trim(R);
if(R.length==0){showErrorMsg(X,fiscalCodeRequiredMsg);
return false
}if(R.length!=16&&R.length!=11&&R!=$.trim(R)){showErrorMsg(X,fiscalCodeVatNotValidMsg);
return false
}if(R.length==11){if(pivaRegex.test(R)){showOkMsg(X);
return true
}else{showErrorMsg(X,vatNotValidMsg);
return false
}}var Q,U,Z,W,V,Y,P;
var S;
var T=/^[A-Z0-9]{16}$/;
Q=R.toUpperCase();
if(Q==""){showErrorMsg(X,fiscalCodeNotValidMsg);
return false
}if(!T.test(Q)){showErrorMsg(X,fiscalCodeNotValidMsg);
return false
}W="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ";
V="ABCDEFGHIJABCDEFGHIJKLMNOPQRSTUVWXYZ";
Y="ABCDEFGHIJKLMNOPQRSTUVWXYZ";
P="BAKPLCQDREVOSFTGUHMINJWZYX";
Z=0;
for(U=1;
U<=13;
U+=2){Z+=Y.indexOf(V.charAt(W.indexOf(Q.charAt(U))))
}for(U=0;
U<=14;
U+=2){Z+=P.indexOf(V.charAt(W.indexOf(Q.charAt(U))))
}if(Z%26!=Q.charCodeAt(15)-"A".charCodeAt(0)){showErrorMsg(X,fiscalCodeNotValidMsg);
return false
}else{showOkMsg(X);
return true
}}else{showErrorMsg(X,fiscalCodeRequiredMsg);
return false
}}function w(Q){resetErrorMsg(Q);
var R=Q.val();
var P=/^\d{6,11}$/;
if(R){if(P.test(R)){showOkMsg(Q);
return true
}else{showErrorMsg(Q,contractCodeNotValidMsg);
return false
}}else{showErrorMsg(Q,contractCodeRequiredMsg);
return false
}}function m(Q){resetErrorMsg(Q);
var R=Q.val();
var P=/^\d{6,11}$/;
if(R){if(P.test(R)){showOkMsg(Q);
return true
}else{showErrorMsg(Q,contractCodeNotValidMsg);
return false
}}else{showErrorMsg(Q,smcRequiredMsg);
return false
}}function t(Q){resetErrorMsg(Q);
var P=Q.val();
if(msisdnRegex.test(P)){showOkMsg(Q);
return true
}else{showErrorMsg(Q,msisdnNotValidMsg);
return false
}}function C(P){var Q={};
if(P.captcha=="captchaCheckWrong"){Q.hiddenRecaptcha=capchaNotCorrectMsg
}switch(parseInt(P.forward)){case 1:if(P.fields!=undefined){if(P.fields.name=="false"){Q.name=nameNotValidMsg
}if(P.fields.surname=="false"){Q.surname=surnameNotValidMsg
}if(P.fields.email=="false"){Q.email=emailNotValidMsg
}if(P.fields.emailUnique=="false"){Q.email=emailAlreadyExistMsg
}if(P.fields.password=="false"){Q.password=passwordNoConformMsg
}}$.each(Q,function(R,S){showErrorMsg($("#editProspectForm input[name='"+R+"']"),S)
});
if($.isEmptyObject(Q)){k()
}break;
case 2:a();
checkSession();
break;
default:k()
}}function a(){$("#editProfile").hide();
$("#editProfileSuccess").show()
}function k(){$("#editProfile").hide();
$("#editProfileFail").show()
}$("#recoverByMailForm").submit(function(Q){Q.preventDefault();
showLoadingModal();
var R=b($("#recoverByMailForm [name='hiddenRecaptcha']"),widgetIdRecoverByMail);
var P=B($("#recoverByMailForm input[name='email']"));
if(R&&P){q($(this))
}else{closeLoadingModal()
}});
function q(Q){var R=$(Q).find("input").serializeObject();
R.recaptchaResponse=grecaptcha.getResponse(widgetIdRecoverByMail);
R.trackingChannel=trackingChannelGlobal;
var P=getAbsoluteUrl("/ReSky/getRecoverInfoByMail",false,true);
$.ajax({url:P,data:R,datatype:"json",type:"POST",xhrFields:{withCredentials:true}}).done(function(S){p(S)
}).fail(function(T,U,S){$("#pwdForgot").hide();
$("#pwdUnsuccess").show()
}).always(function(){grecaptcha.reset(widgetIdRecoverByMail);
closeLoadingModal()
})
}function p(Q){if(Q){switch(Q.result){case 0:$("#pwdForgot").hide();
$("#pwdSuccess").show();
break;
case 1:$("#pwdForgot").hide();
var P=$("#choosePwdForgot");
if(Q.msisdn){P.find("#viaSmsSubmit, .border-btm").show();
$("#viaSmsForm input[name='msisdn']").val(Q.msisdn)
}else{P.find("#viaSmsSubmit, .border-btm").hide()
}$("#choosePwdForgot").show();
break;
case 2:$("#pwdForgot").hide();
$("#mailForgotCCCF").show();
break;
case 3:var R={};
if(Q.captcha===false){R.hiddenRecaptcha=capchaNotCorrectMsg
}if(Q.email===false){R.email=emailNotValidMsg
}$.each(R,function(S,T){showErrorMsg($("#recoverByMailForm input[name='"+S+"']"),T)
});
break;
default:$("#pwdForgot").hide();
$("#pwdUnsuccess").show()
}}else{$("#pwdForgot").hide();
$("#pwdUnsuccess").show()
}}$("#viaMailSubmit").click(function(){$("#choosePwdForgot").hide();
var Q={trackingChannel:trackingChannelGlobal};
var P=getAbsoluteUrl("/ReSky/recoverPasswordClientByEmail",false,true);
$.ajax({url:P,data:Q,datatype:"json",type:"POST",xhrFields:{withCredentials:true}}).done(function(R){L(R)
}).fail(function(S,T,R){$("#pwdForgot").hide();
$("#pwdUnsuccess").show()
}).always(function(){closeLoadingModal()
})
});
function L(P){if(P){switch(P.result){case 0:$("#pwdForgot").hide();
$("#pwdSuccess").show();
break;
default:$("#pwdForgot").hide();
$("#pwdUnsuccess").show()
}}else{$("#pwdForgot").hide();
$("#pwdUnsuccess").show()
}}$("#viaSmsForm").submit(function(P){P.preventDefault();
showLoadingModal();
var Q=b($("#viaSmsForm [name='hiddenRecaptcha']"),widgetIdRecoverPwdByMsisdn);
if(Q){o($(this))
}else{closeLoadingModal()
}});
function o(Q){var R={};
R.recaptchaResponse=grecaptcha.getResponse(widgetIdRecoverPwdByMsisdn);
showLoadingModal();
var P=getAbsoluteUrl("/ReSky/sendPin",false,true);
$.ajax({url:P,data:R,datatype:"json",type:"POST",xhrFields:{withCredentials:true}}).done(function(S){r(S)
}).fail(function(T,U,S){$("#viaSms").hide();
$("#pwdUnsuccess").show()
}).always(function(){grecaptcha.reset(widgetIdRecoverPwdByMsisdn);
closeLoadingModal()
})
}function r(P){if(P){switch(parseInt(P.result)){case 0:$("#viaSms").hide();
$("#enterCodeSms").show();
break;
default:$("#viaSms").hide();
$("#pwdUnsuccess").show()
}}else{$("#viaSms").hide();
$("#pwdUnsuccess").show()
}}$("#codeSmsForm").submit(function(R){R.preventDefault();
showLoadingModal();
var Q=$(this).find("input").serializeObject();
var P=getAbsoluteUrl("/ReSky/checkPin",false,true);
$.ajax({url:P,data:Q,datatype:"json",type:"POST",xhrFields:{withCredentials:true}}).done(function(S){if(S){switch(S.result){case 0:$("#enterCodeSms").hide();
$("#enterPassword").show();
break;
default:$("#enterCodeSms").hide();
$("#pwdUnsuccess").show()
}}else{$("#enterCodeSms").hide();
$("#pwdUnsuccess").show()
}}).fail(function(T,U,S){$("#enterCodeSms").hide();
$("#pwdUnsuccess").show()
}).always(function(){closeLoadingModal()
})
});
$("#setPasswordForm").submit(function(Q){Q.preventDefault();
showLoadingModal();
var S=b($("#setPasswordForm [name='hiddenRecaptcha']"),widgetIdPwdForgotNewPwd);
var P=u($("#setPasswordForm input[name='password']"),$("#recoverByMailForm input[name='email']").val());
var R=e($("#setPasswordForm input[name='password']"),$("#setPasswordForm input[name='password2']"));
if(S&&P&&R){K($(this))
}else{closeLoadingModal()
}});
function K(Q){var R=$(Q).find("input").serializeObject();
R.recaptchaResponse=grecaptcha.getResponse(widgetIdPwdForgotNewPwd);
R.trackingChannel=trackingChannelGlobal;
var P=getAbsoluteUrl("/ReSky/smartMenuChangePassword",false,true);
$.ajax({url:P,data:R,datatype:"json",type:"POST",xhrFields:{withCredentials:true}}).done(function(S){x(S)
}).fail(function(T,U,S){$("#enterPassword").hide();
$("#pwdUnsuccess").show()
}).always(function(){grecaptcha.reset(widgetIdPwdForgotNewPwd);
closeLoadingModal()
})
}function x(P){if(P){switch(P.result){case 0:$("#enterPassword").hide();
$("#pwdSuccess").show();
break;
case 1:showErrorMsg($("#setPasswordForm input[name='password']"),passwordNoConformMsg);
break;
default:$("#enterPassword").hide();
$("#pwdUnsuccess").show()
}}else{$("#enterPassword").hide();
$("#pwdUnsuccess").show()
}}$("#chooseMailForgot #mailViaCCCFSubmit").click(function(){$("#chooseMailForgot").hide();
$("#mailForgotCCCF").show()
});
$("#chooseMailForgot #mailViaSmsSubmit").click(function(){grecaptcha.reset(widgetIdMailForgotSms);
$("#chooseMailForgot").hide();
$("#mailViaSms").show()
});
$("#mailViaSmsForm").submit(function(Q){Q.preventDefault();
showLoadingModal();
var P=t($("#mailViaSmsForm [name='msisdn']"));
var R=b($("#mailViaSmsForm [name='hiddenRecaptcha']"),widgetIdMailForgotSms);
if(R&&P){z($(this))
}else{closeLoadingModal();
grecaptcha.reset(widgetIdMailForgotSms)
}});
function z(Q){var R=$(Q).find("input").serializeObject();
R.recaptchaResponse=grecaptcha.getResponse(widgetIdMailForgotSms);
var P=getAbsoluteUrl("/ReSky/checkMsisdnForPin",false,true);
$.ajax({url:P,data:R,datatype:"json",type:"POST",xhrFields:{withCredentials:true}}).done(function(S){A(S)
}).fail(function(T,U,S){$("#mailViaSms").hide();
$("#mailForgotCCCF").show()
}).always(function(){grecaptcha.reset(widgetIdMailForgotSms);
closeLoadingModal()
})
}function A(P){if(P){switch(parseInt(P.result)){case 0:$("#mailViaSms").hide();
$("#editConfirmMailForm input[name='email']").val(P.email);
$("#mailEnterCodeSms").show();
break;
case 3:if(!P.captcha){showErrorMsg($("#mailViaSmsForm [name='hiddenRecaptcha']"),capchaNotCorrectMsg)
}if(!P.msisdn){showErrorMsg($("#mailViaSmsForm [name='msisdn']"),msisdnNotValidMsg)
}break;
default:$("#mailViaSms").hide();
$("#mailForgotCCCF").show()
}}else{$("#mailViaSms").hide();
$("#mailForgotCCCF").show()
}}$("#mailCodeSmsForm").submit(function(R){R.preventDefault();
showLoadingModal();
var Q=$(this).find("input").serializeObject();
if(Q.pinCode){var P=getAbsoluteUrl("/ReSky/checkPin",false,true);
$.ajax({url:P,data:Q,datatype:"json",type:"POST",xhrFields:{withCredentials:true}}).done(function(S){if(S){switch(S.result){case 0:$("#mailEnterCodeSms").hide();
$("#mailEditConfirm").show();
break;
default:$("#mailEnterCodeSms").hide();
$("#mailUnsuccess").show()
}}else{$("#mailEnterCodeSms").hide();
$("#mailUnsuccess").show()
}}).fail(function(T,U,S){$("#mailEnterCodeSms").hide();
$("#mailUnsuccess").show()
}).always(function(){closeLoadingModal()
})
}else{showErrorMsg($(this).find("input[name='pinCode']"),requiredFielddMsg);
closeLoadingModal()
}});
$("#mailForgotCCCFForm").submit(function(R){R.preventDefault();
showLoadingModal();
var S=b($("#mailForgotCCCFForm [name='hiddenRecaptcha']"),widgetIdMailForgotCCCF);
var Q=w($("#mailForgotCCCFForm [name='contractcode']"));
var P=E($("#mailForgotCCCFForm [name='fiscalcode']"));
if(S&&Q&&P){n($(this))
}else{closeLoadingModal();
grecaptcha.reset(widgetIdMailForgotCCCF)
}});
function n(Q){var R=$(Q).find("input").serializeObject();
R.recaptchaResponse=grecaptcha.getResponse(widgetIdMailForgotCCCF);
var P=getAbsoluteUrl("/ReSky/checkCCCF",false,true);
$.ajax({url:P,data:R,datatype:"json",type:"POST",xhrFields:{withCredentials:true}}).done(function(S){v(S)
}).fail(function(T,U,S){$("#mailForgotCCCF").hide();
$("#mailUnsuccess").show()
}).always(function(){grecaptcha.reset(widgetIdMailForgotCCCF);
closeLoadingModal()
})
}function v(Q){var R={};
$("#enterCodSmartCard #confirmSmcSubmit").show();
$("#enterCodSmartCard #askAssocNames").hide();
if(Q&&Q.accountCheck){if(Q.accountCheck.indexOf("ASK")!=-1){var P=M(Q.accountCheck);
R=$.extend(R,P)
}else{switch(Q.accountCheck){case"registered":$("#mailEditConfirm").show();
$("#mailForgotCCCF").hide();
$("#mailEditConfirm input[name='email']").val(Q.email);
break;
default:$("#mailForgotCCCF").hide();
$("#mailUnsuccess").show();
break
}}}if(!$.isEmptyObject(R)){$("#mailForgotCCCF").hide();
$("#mailUnsuccess").show()
}}function M(P){var Q={};
switch(P){case"KO_BLOCK_REGISTRATION":Q.ko=true;
break;
case"ASK_NAME_SMC_CODE_PF":case"ASK_NAME_SMC_CODE_P":case"ASK_NAME_SMC_CODE_F":G(true);
break;
case"ASK_ALTERNATIVE_SMC":G(false);
break;
default:Q.ko=true
}return Q
}function G(P){$("#mailForgotCCCF").hide();
$("#enterCodSmartCard").show();
if(P){$("#enterCodSmartCard #confirmSmcSubmit").hide();
$("#enterCodSmartCard #askAssocNames").show()
}}$("#enterCodSmartCard #askAssocNames").click(function(){$("#enterCodSmartCard").hide();
$("#enterAssocNames").show()
});
$("#enterCodSmartCard #smartcodForm").submit(function(P){P.preventDefault();
d()
});
$("#enterAssocNames #assocNamesForm").submit(function(P){P.preventDefault();
d()
});
function d(){showLoadingModal();
var Q={};
Q.contractcode=$("#mailForgotCCCF #mailForgotCCCFForm input[name='contractcode']").val();
Q.fiscalcode=$("#mailForgotCCCF #mailForgotCCCFForm input[name='fiscalcode']").val();
Q.paramSmartCardCode=$("#enterCodSmartCard #smartcodForm input[name='paramSmartCardCode']").val();
if($("#enterAssocNames #assocNamesForm").is(":visible")){Q.paramNameCfFittizi=$("#enterAssocNames #assocNamesForm input[name='paramNameCfFittizi']").val();
Q.paramSurnameCfFittizi=$("#enterAssocNames #assocNamesForm input[name='paramSurnameCfFittizi']").val()
}var P=getAbsoluteUrl("/ReSky/checkCCCF",false,true);
$.ajax({url:P,data:Q,datatype:"json",type:"POST",xhrFields:{withCredentials:true}}).done(function(R){f(R)
}).fail(function(S,T,R){$("#enterCodSmartCard").hide();
$("#enterAssocNames").hide();
$("#mailUnsuccess").show()
}).always(function(){closeLoadingModal()
})
}function f(P){if(P&&P.accountCheck){switch(P.accountCheck){case"registered":$("#enterCodSmartCard").hide();
$("#enterAssocNames").hide();
$("#mailEditConfirm").show();
$("#mailEditConfirm input[name='email']").val(P.email);
break;
default:$("#enterCodSmartCard").hide();
$("#enterAssocNames").hide();
$("#mailUnsuccess").show()
}}else{$("#enterCodSmartCard").hide();
$("#enterAssocNames").hide();
$("#mailUnsuccess").show()
}}$("#editConfirmMailForm").submit(function(R){R.preventDefault();
showLoadingModal();
var P=getAbsoluteUrl("/ReSky/sendRecoverMail",false,true);
var Q={trackingChannel:trackingChannelGlobal};
$.ajax({url:P,data:Q,datatype:"json",type:"POST",xhrFields:{withCredentials:true}}).done(function(S){j(S,$("#mailEditConfirm"))
}).fail(function(T,U,S){$("#mailEditConfirm").hide();
$("#mailUnsuccess").show()
}).always(function(){closeLoadingModal()
})
});
function j(Q,P){if(Q){switch(Q.result){case 0:P.hide();
$("#mailSuccess").show();
break;
default:P.hide();
$("#mailUnsuccess").show()
}}else{P.hide();
$("#mailUnsuccess").show()
}}$("#mailEditConfirm #emailEditSubmit").click(function(){$("#mailEditConfirm").hide();
$("#mailChangeEditConfirm").show()
});
$("#changeEditConfirmMailForm input[type='email2']").blur(function(P){P.preventDefault();
l($(this),$("#changeEditConfirmMailForm input[type='email']").val())
});
$("#changeEditConfirmMailForm input[type='email2']").keydown(function(P){resetErrorMsg($(this))
});
$("#changeEditConfirmMailForm").submit(function(R){R.preventDefault();
showLoadingModal();
var S=$(this).find("input[name='email']");
var Q=B(S);
var P=l($(this).find("input[name='email2']"),S.val());
if(Q&&P){y($(this))
}else{closeLoadingModal()
}});
function y(Q){var R={};
R.email=$(Q).find("input[name='email']").val();
R.trackingChannel=trackingChannelGlobal;
var P=getAbsoluteUrl("/ReSky/sendRecoverMail",false,true);
$.ajax({url:P,data:R,datatype:"json",type:"POST",xhrFields:{withCredentials:true}}).done(function(S){j(S,$("#mailChangeEditConfirm"))
}).fail(function(T,U,S){$("#mailChangeEditConfirm").hide();
$("#mailUnsuccess").show()
}).always(function(){closeLoadingModal()
})
}});
var skyIdUserData;
function customManageLoggedUserType(a){skyIdUserData=a;
if(a.customer!=undefined){if(a.customer=="C"){$(".loggedClient").show();
$(".loggedProspect").hide()
}else{$(".loggedProspect").show();
$(".loggedClient").hide();
dbEmail=a.email;
dbName=a.name;
dbSurname=a.surname;
setInitialEditProspectValues(dbEmail,dbName,dbSurname)
}}}function resetHomeLoggedView(a){if(a!=undefined&&a.customer!=undefined&&a.customer=="P"){$("#loggedPanel .loggedProspect > div").hide();
$("#loggedPanel .back-link").hide();
$("#loggedPanel .loggedProspect > div#buttonsLink").show();
$("#loggedPanel .loggedCommon").show();
$(".login_container p.error-msg").remove();
$("#loggedPanel input[type='text'], #loggedPanel input[type='password']").val("");
setInitialEditProspectValues(dbEmail,dbName,dbSurname)
}}function resetHomeNotLoggedView(){$("#notLoggedPanel .loginItem > div").hide();
$("#notLoggedPanel .loginItem input[type='text'], #notLoggedPanel .loginItem input[type='password']").val("");
$("#notLoggedPanel, #notLoggedPanel .loginItem #login").show()
}function setInitialEditProspectValues(b,a,c){$("#editProspectForm input[name='email']").val(b);
$("#editProspectForm input[name='name']").val(a);
$("#editProspectForm input[name='surname']").val(c)
}function getLoginCaptchaUrl(){return"/ReSky/loginRecaptcha2JSONP"
}function showCaptchaLoginAttempts(){$(".login-wrapper-recaptcha").show();
widgetIdLoginAttempts=grecaptcha.render("recaptchaLoginAttempts",{sitekey:siteKey,theme:"light"})
}function hideCaptchaLoginAttempts(){$(".login-wrapper-recaptcha").hide()
}function checkLoginCaptchaValue(){if($("#recaptchaLoginAttempts").is(":visible")&&grecaptcha.getResponse(widgetIdLoginAttempts)==""){return false
}return true
}function getLoginCaptchaValue(){var a="";
if($("#recaptchaLoginAttempts").is(":visible")){a=grecaptcha.getResponse(widgetIdLoginAttempts)
}return a
}function resetLoginCaptchaValue(){if($("#recaptchaLoginAttempts").is(":visible")){value=grecaptcha.reset(widgetIdLoginAttempts)
}}function verifyProspectEditCallback(){resetErrorMsg($("#editProspectForm [name='hiddenRecaptcha']"))
}function recoverByMailCallback(){}function recoverMailbyCCCFCallback(){}function showErrorMsg(a,b){a.after("<p class='error-msg'>"+b+"</p>")
}function showOkMsg(a,b){resetErrorMsg(a)
}function resetErrorMsg(b){var a=b.next("p");
if(a){a.remove()
}}$(document).ready(function(){$(".modify-btn").click(function(){$(".loggedCommon").hide();
$(".editProfile").show();
$(".buttonsLink").hide();
$(".backto-buttonsLink").show()
});
$(".backto-buttonsLink").click(function(){$(".loggedCommon").show();
$(".editProfile").hide();
$(".editProfileResult").hide();
$(".deleteProfileResult").hide();
$(".buttonsLink").show();
$(".backto-buttonsLink").hide()
});
$(".deleteProfile_link").click(function(){$(".deleteProfileWrap").show()
});
$(".cancel-edit-btn").click(function(){$(".deleteProfileWrap").hide()
});
$(".backto-login").click(function(){$("#chooseMailForgot").hide();
$("#mailForgotCCCF").hide();
$("#pwdForgot").hide();
$("#login").show()
});
$(".backto-mailForgot").click(function(){$("#enterCodSmartCard").hide();
$("#enterAssocNames").hide();
$("#mailViaSms").hide();
$("#mailForgotCCCF").show()
});
$("#viaSmsSubmit").click(function(){$("#choosePwdForgot").hide();
$("#viaSms").show()
});
$(".backto-pwdForgot").click(function(){$("#viaSms").hide();
$("#pwdForgot").show()
});
$(".backto-viaSms").click(function(){$("#enterCodeSms").hide();
$("#viaSms").show()
});
$(".backto-enterCodeSms").click(function(){$("#enterPassword").hide();
$("#enterCodeSms").show()
});
$(".open-popup").click(function(){var a=$(this).attr("data-popup");
$("#"+a).show()
});
$(".close-popup").click(function(){$(this).closest(".popup-container").hide()
})
});
var keepAliveTimeoutInMinutes=3;
var unicaURLDataForKeepAlive="";
var unicaUrl="rtcd1.sky.it";
var page="";
if(location.host.indexOf("preaem")==0){unicaUrl="coll.rtcd1.sky.it"
}function clickThruForKeepAlive(){var f=document.location.protocol+"//"+unicaUrl+"/uiconnector/clickThru";
var j="Alive";
var g=$.cookie("RtdSessionId");
var c=$.cookie("RtdContractCode");
var a="Contratto";
var d="blank.html";
var h="";
var b=f+"?u="+d+"&e="+j+"&s="+g+"&v="+c+"&l="+a;
if(typeof(SESSION_FLG_LOG)!="undefined"){h=SESSION_FLG_LOG;
b+="&session_flg_log="+h
}return b
}function startJsonpRequestForKeepAlive(){if($.cookie("RtdSessionId")&&$.cookie("RtdContractCode")){jsonp_request(clickThruForKeepAlive())
}}function startKeepAlive(){startJsonpRequestForKeepAlive();
setInterval(function(){startJsonpRequestForKeepAlive()
},1000*60*keepAliveTimeoutInMinutes)
}$(function(){startKeepAlive()
});
var it_sky_cassettone_login={SWITCH_CONTRACT_URL:getSkyWSCUrl("/wscrest/loginServices/switchContract",true),LOGIN_BOX_INFO_URL:getSkyWSCUrl("/wscrest/loginServices/loginBoxInfo",true),RETRIEVE_TREATEMENTS_RTD_URL:getSkyWSCUrl("/wscrest/loginServices/retrieveTreatmentsRTD",true),TRACE_TREATEMENTS_URL:getSkyWSCUrl("/wscrest/loginServices/traceRTD",true),CHECK_RTD_URL:getSkyWSCUrl("/wscrest/loginServices/checkRTD",true),RTD_COOKIE_PATH:"/",RTD_COOKIE_DOMAIN:".sky.it",MENU_PANELS_ID_REGEX:/^(recognized|notLogged|logged)Panel$/,TIMEOUT_CALL_SWITCH:10000,TIMEOUT_CALL_LOGIN:10000,TIMEOUT_CALL_TREATMENTS:10000,TIMEOUT_WAIT_CHECK_RTD:1000,flagLoadingInfo:false,flagLoadingRTD:false,last_login_box_info_result:undefined,last_treatments_rtd:undefined,called_check_rtd:undefined,calling_login_box:false,calling_treatments_rtd:false,switch_contract:function(a,b){var c={request:{contractCode:a}};
this.show_loading_wheel_rtd();
$.ajax({url:this.SWITCH_CONTRACT_URL,data:JSON.stringify(c),datatype:"json",contentType:"application/json",type:"POST",xhrFields:{withCredentials:true},timeout:this.TIMEOUT_CALL_SWITCH}).done(function(d){if(b){location.reload()
}else{it_sky_cassettone_login.update_user_section(it_sky_cassettone_login.last_login_box_info_result,a);
it_sky_cassettone_login.load_treatments_rtd();
if(typeof switchContractDone!=="undefined"){it_sky_cassettone_login.called_check_rtd=undefined;
switchContractDone()
}}}).fail(function(e,f,d){it_sky_cassettone_login.traceError(e,f,d)
}).always(function(){it_sky_cassettone_login.hide_loading_wheel_rtd()
})
},load_login_box_info:function(){if(!this.last_login_box_info_result){if(!this.calling_login_box){this.calling_login_box=true;
this.show_loading_wheel_user_data();
$.ajax({url:this.LOGIN_BOX_INFO_URL,datatype:"json",contentType:"application/json",type:"POST",xhrFields:{withCredentials:true},timeout:this.TIMEOUT_CALL_LOGIN}).done(function(a){if(a.response){it_sky_cassettone_login.update_user_section(a.response,null);
it_sky_cassettone_login.last_login_box_info_result=a.response
}}).fail(function(b,c,a){it_sky_cassettone_login.last_login_box_info_result=undefined;
it_sky_cassettone_login.hideMenuPanels();
if(typeof skyIdUserData=="undefined"){$("#notLoggedPanel").show()
}else{$("#loggedPanel, #loggedBase-innerPanel").show()
}it_sky_cassettone_login.traceError(b,c,a)
}).always(function(){it_sky_cassettone_login.hide_loading_wheel_user_data();
it_sky_cassettone_login.calling_login_box=false
})
}}else{this.update_user_section(this.last_login_box_info_result,null)
}},load_treatments_rtd:function(){$("#recognizedPanel .menu-treatments-rtd-list li:not([id]), #loggedPanel .menu-treatments-rtd-list li:not([id])").remove();
if($.cookie("PETERWITT")||$.cookie("ext")){if(!this.last_treatments_rtd){if(!this.calling_treatments_rtd){this.calling_treatments_rtd=true;
this.show_loading_wheel_rtd();
if(this.called_check_rtd!==undefined){setTimeout(function(){it_sky_cassettone_login.called_check_rtd.resolve()
},this.TIMEOUT_WAIT_CHECK_RTD)
}else{this.called_check_rtd=$.Deferred().resolve()
}$.when(this.called_check_rtd).done(function(){$.ajax({url:it_sky_cassettone_login.RETRIEVE_TREATEMENTS_RTD_URL,datatype:"json",contentType:"application/json",type:"POST",xhrFields:{withCredentials:true},timeout:it_sky_cassettone_login.TIMEOUT_CALL_TREATMENTS}).done(function(a){if(a.response){$(".login_container .menu-channel-section").show();
it_sky_cassettone_login.update_rtd_section(a.response)
}}).fail(function(b,c,a){it_sky_cassettone_login.traceError(b,c,a);
it_sky_cassettone_login.last_treatments_rtd=undefined;
$(".login_container .menu-channel-section").hide()
}).always(function(){it_sky_cassettone_login.hide_loading_wheel_rtd();
it_sky_cassettone_login.calling_treatments_rtd=false
})
})
}}else{this.update_rtd_section(this.last_treatments_rtd)
}}},show_loading_wheel_user_data:function(){this.flagLoadingInfo=true;
$("#loadingPanel").show()
},hide_loading_wheel_user_data:function(){this.flagLoadingInfo=false;
this.manageHideLoadingWheel()
},show_loading_wheel_rtd:function(){this.flagLoadingRTD=true;
$("#loadingPanel").show()
},hide_loading_wheel_rtd:function(){this.flagLoadingRTD=false;
this.manageHideLoadingWheel()
},manageHideLoadingWheel:function(){if(!this.flagLoadingInfo&&!this.flagLoadingRTD){$("#loadingPanel").hide()
}},update_user_section:function(b,c){if(b&&b.loginStatus!==undefined){switch(b.loginStatus){case 1:if(!$.isEmptyObject(b.contractList)){it_sky_cassettone_login.hideMenuPanels();
$("#recognizedPanel").show();
$("#recognizedPanel a.menu-email-link").text(b.email);
$("#recognizedPanel a.menu-email-link").attr("href","mailto:"+b.email);
$("#recognizedPanel .menu-username").text(b.name);
$("#recognizedPanel .menu-user-profile").removeClass(this.retrieveCurrentClassLoyalty).addClass(this.retrieveClassLoyalty(b.contractList[0].segmentLoyalty))
}else{it_sky_cassettone_login.hideMenuPanels();
$("#notLoggedPanel").show();
if(typeof resetHomeNotLoggedView!=="undefined"){resetHomeNotLoggedView()
}}break;
case 2:if(!$.isEmptyObject(b.contractList)){it_sky_cassettone_login.hideMenuPanels();
$("#loggedPanel, #loggedRTD-innerPanel").show();
if(b.avatar){$("#loggedRTD-innerPanel .menu-profile-pic-cont").removeClass("menu-profile-pic-default");
$("#loggedRTD-innerPanel .menu-profile-pic-cont").css("background-image","url("+b.avatar+")")
}else{$("#loggedRTD-innerPanel .menu-profile-pic-cont").css("background-image","");
$("#loggedRTD-innerPanel .menu-profile-pic-cont").addClass("menu-profile-pic-default")
}$("#loggedRTD-innerPanel a.menu-email-link").text(b.email);
$("#loggedRTD-innerPanel a.menu-email-link").attr("href","mailto:"+b.email);
$("#loggedRTD-innerPanel .menu-profile-menu-name").text(b.name);
$("#loggedRTD-innerPanel .menu-profile-menu-surname").text(b.surname);
var e=$.cookie("RtdContractCode")||c;
var a=$.grep(b.contractList,function(f){return f.contractCode==e
});
var d=$.isEmptyObject(a)?b.contractList[0]:a[0];
$("#loggedRTD-innerPanel .menu-user-profile").removeClass(this.retrieveCurrentClassLoyalty).addClass(this.retrieveClassLoyalty(d.segmentLoyalty));
$("#loggedRTD-innerPanel .menu-status-code .menu-status").hide();
if(d.state){$("#loggedRTD-innerPanel .menu-status-code").find(".menu-status."+d.state.toLowerCase()).show()
}if(d.contractCode){$("#loggedRTD-innerPanel .menu-status-code .menu-code .menu-contract-code").text(d.contractCode);
$("#loggedRTD-innerPanel .menu-status-code .menu-code").show()
}else{$("#loggedRTD-innerPanel .menu-status-code .menu-code").hide()
}$("#loggedRTD-innerPanel .menu-usercodeArrowMob").hide();
if(d.contractCode&&b.contractList.length>1){for(i=0;
i<b.contractList.length;
i++){if(b.contractList[i].contractCode==d.contractCode){if(i===0){$(".menu-profile-container .menu-status-code .menu-code .select-right-contract").show()
}else{if(i===b.contractList.length-1){$(".menu-profile-container .menu-status-code .menu-code .select-left-contract").show()
}else{$(".menu-profile-container .menu-status-code .menu-code .menu-usercodeArrowMob").show()
}}break
}}}$("#loggedRTD-innerPanel .menu-bill-status span").hide();
if(d.invoiceStatus){$("#loggedRTD-innerPanel .menu-bill-status").find("span.menu-"+d.invoiceStatus.toLowerCase()).css("display","inline-block")
}}else{it_sky_cassettone_login.hideMenuPanels();
$("#loggedPanel, #loggedBase-innerPanel, #loggedBase-innerPanel .loggedClient").show()
}break;
default:it_sky_cassettone_login.hideMenuPanels();
$("#notLoggedPanel").show();
if(typeof resetHomeNotLoggedView!=="undefined"){resetHomeNotLoggedView()
}}}},update_rtd_section:function(b){$(".login_container .menu-channel-section").hide();
if(b&&b.status===0){if(b.cacheResponseInPage===true){this.last_treatments_rtd=b
}if(!$.isEmptyObject(b.treatmentList)){$(".login_container .menu-channel-section").show();
var d=[];
var a=$(".login_container #menu-treatment-rtd-model");
$.each(b.treatmentList,function(e,f){var g=a.clone();
g.find("a").attr("href",getSkyWSCUrl(f.cta,true)).attr("data-tc",f.treatmentCode);
g.find("a").click(function(k){k.preventDefault();
it_sky_cassettone_login.show_loading_wheel_rtd();
var h=[];
h.push($(this).attr("data-tc"));
var j={request:{treatmentCodes:h,event:"Presented"}};
$.ajax({url:it_sky_cassettone_login.TRACE_TREATEMENTS_URL,data:JSON.stringify(j),datatype:"json",contentType:"application/json",type:"POST",xhrFields:{withCredentials:true}});
it_sky_cassettone_login.delayPageRedirect($(this).attr("href"))
});
g.find("img").attr("src",getSkyWSCUrl(f.imageURL,true)).attr("alt",f.alternativeText);
g.find("span.menu-title").text(f.sottotitolo);
g.removeAttr("id");
$("#recognizedPanel .menu-treatments-rtd-list, #loggedPanel .menu-treatments-rtd-list").append(g);
d.push(f.treatmentCode)
});
if(!$.isEmptyObject(d)){var c={request:{treatmentCodes:d,event:"Visualized"}};
$.ajax({url:this.TRACE_TREATEMENTS_URL,data:JSON.stringify(c),datatype:"json",contentType:"application/json",type:"POST",xhrFields:{withCredentials:true}})
}}}},traceError:function(b,c,a){},retrieveClassLoyalty:function(a){var b;
switch(a){case"001":b="x1";
break;
case"002":b="x3";
break;
case"003":b="x6";
break;
case"004":b="x10";
break;
default:b="x0"
}return b
},retrieveCurrentClassLoyalty:function(a,b){return(b.match(/(^|\s)x\d{1,2}/g)||[]).join(" ")
},cleanCookies:function(){$.each(["PETERWITT","ext","RtdContractCode","RtdSessionId"],function(a,b){$.cookie(b,null,{domain:it_sky_cassettone_login.RTD_COOKIE_DOMAIN,path:it_sky_cassettone_login.RTD_COOKIE_PATH})
})
},retrieveAllInfo:function(){this.load_login_box_info();
this.load_treatments_rtd()
},check_RTD:function(){if($.cookie("PETERWITT")||$.cookie("ext")){this.called_check_rtd=$.Deferred();
$.ajax({url:this.CHECK_RTD_URL,datatype:"json",contentType:"application/json",type:"POST",xhrFields:{withCredentials:true}}).done(function(a){if(typeof checkRtdDone!=="undefined"){checkRtdDone(a)
}}).fail(function(b,c,a){if(typeof checkRtdFail!=="undefined"){checkRtdFail(b,c,a)
}}).always(function(){it_sky_cassettone_login.called_check_rtd.resolve();
if(typeof checkRtdAlways!=="undefined"){checkRtdAlways()
}})
}else{if(typeof checkRtdFail!=="undefined"){checkRtdFail()
}}},hideMenuPanels:function(){$(".login_container div").filter(function(){return this.id.match(it_sky_cassettone_login.MENU_PANELS_ID_REGEX)
}).hide()
},delayPageRedirect:function(a){setTimeout(function(){window.location.href=a
},250)
}};
$(function(){$("#loggedRTD-innerPanel .select-left-contract").click(function(c){c.preventDefault();
var d=$.cookie("RtdContractCode")||$(".menu-contract-code").first().text();
var a;
if(it_sky_cassettone_login&&it_sky_cassettone_login.last_login_box_info_result&&!$.isEmptyObject(it_sky_cassettone_login.last_login_box_info_result.contractList)&&d){var b=it_sky_cassettone_login.last_login_box_info_result;
for(i=0;
i<b.contractList.length;
i++){if(b.contractList[i].contractCode===d){a=i>0?b.contractList[i-1].contractCode:b.contractList[b.contractList.length-1].contractCode;
break
}}}if(a){it_sky_cassettone_login.switch_contract(a,false)
}return false
});
$("#loggedRTD-innerPanel .select-right-contract").click(function(c){c.preventDefault();
var d=$.cookie("RtdContractCode")||$(".menu-contract-code").first().text();
var a;
if(it_sky_cassettone_login&&it_sky_cassettone_login.last_login_box_info_result&&!$.isEmptyObject(it_sky_cassettone_login.last_login_box_info_result.contractList)&&d){var b=it_sky_cassettone_login.last_login_box_info_result;
for(i=0;
i<b.contractList.length;
i++){if(b.contractList[i].contractCode===d){a=i==b.contractList.length-1?b.contractList[0].contractCode:b.contractList[i+1].contractCode;
break
}}}if(a){it_sky_cassettone_login.switch_contract(a,false)
}return false
});
$("#recognizedPanel .logout_link").click(function(b){b.preventDefault();
it_sky_cassettone_login.cleanCookies();
it_sky_cassettone_login.last_login_box_info_result=undefined;
it_sky_cassettone_login.last_treatments_rtd=undefined;
it_sky_cassettone_login.hideMenuPanels();
$("#notLoggedPanel").show();
var a=it_sky_cassettone_login.last_login_box_info_result?it_sky_cassettone_login.last_login_box_info_result.loginStatus:undefined;
switch(a){case 1:$("#recognizedPanel").show();
break;
default:$("#notLoggedPanel").show();
break
}if(typeof resetHomeNotLoggedView!=="undefined"){resetHomeNotLoggedView()
}return false
})
});
function getCookie(d){var b=d+"=";
var f=decodeURIComponent(document.cookie);
var a=f.split(";");
for(var e=0;
e<a.length;
e++){var g=a[e];
while(g.charAt(0)==" "){g=g.substring(1)
}if(g.indexOf(b)==0){return g.substring(b.length,g.length)
}}return false
}function isLoggedUser(){if(getCookie("PETERWITT")&&getCookie("PETERWITT")!=""){return true
}return false
}function isClient(){if(getCookie("ext")&&getCookie("ext")!=""){return true
}return false
}function isGuest(){if(!isLoggedUser()&&!isClient()){return true
}return false
}function isProspect(){if(isLoggedUser()&&!isClient()){return true
}return false
}function isLoggedAndKnownClient(){if(isClient()&&isLoggedUser()){return true
}return false
}function isJustKnownClient(){if(isClient()&&!isLoggedUser()){return true
}else{return false
}}function getUserType(a){if(a==undefined){if(isGuest()){return"guest"
}if(isProspect()){return"prospect"
}if(isLoggedAndKnownClient()){return"loggedandknownclient"
}if(isJustKnownClient()){return"knownclient"
}}else{if(a){return getUserType()
}else{if(isGuest()){return 0
}if(isProspect()){return 1
}if(isLoggedAndKnownClient()){return 3
}if(isJustKnownClient()){return 2
}}}}$(function(){var a=$("#header .mainMenu_itemBtn.abbonarsiBtn");
if(isLoggedAndKnownClient()||isClient()){a.hide()
}});

}
/*
     FILE ARCHIVED ON 13:49:10 Nov 23, 2017 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 23:04:07 Jun 21, 2022.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
*/
/*
playback timings (ms):
  captures_list: 1163.101
  exclusion.robots: 0.246
  exclusion.robots.policy: 0.237
  RedisCDXSource: 0.648
  esindex: 0.009
  LoadShardBlock: 1139.642 (3)
  PetaboxLoader3.datanode: 80.739 (4)
  CDXLines.iter: 15.832 (3)
  load_resource: 86.652
  PetaboxLoader3.resolve: 32.317
*/