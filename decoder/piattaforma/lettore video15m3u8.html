<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lettore Video bry os</title>
   <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
   <style>
    /* Stili generali */
* { margin: 0; padding: 0; box-sizing: border-box; font-family: Arial, sans-serif; }
body { background-color: #000; color: #fff; display: flex; justify-content: center; align-items: center; height: 100vh; overflow: hidden; }
.video-container { position: relative; width: 100%; height: 100vh; background-color: #000; overflow: hidden; }



video {
  position: relative; /* oppure absolute se preferisci */
  z-index: 0;
  width: 100%;
  height: 100%;
  object-fit: contain;
}



/* Spinner per il caricamento */
.spinner {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 5;
  display: none;
}
.spinner img {
  width: 50px;
  height: 50px;
  animation: spin 1s linear infinite;
}
@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

button:focus,
button:active {
  outline: none;
  box-shadow: none;
}
button::-moz-focus-inner {
  border: 0;
}

/* Controlli in alto */
.top-controls {
  position: absolute;
  top: 28px;
  left: 0;
  right: 0;
  display: flex;
  justify-content: space-between;
  padding: 20px;
  
  z-index: 2;
}
.title {
  position: absolute;
  bottom: 38px;
  left: 0;
  right: 0;
  text-align: center;
  font-size: 24px;
  font-weight: bold;
  z-index: 1;
}
.x-ray {
  display: flex;
  align-items: center;
  cursor: pointer;
  z-index: 3;
}
.x-ray span { margin-right: 10px; font-weight: bold; }
.dropdown-arrow {
  width: 14px;
  height: 14px;
  border-left: 2px solid #fff;
  border-bottom: 2px solid #fff;
  transform: rotate(-45deg);
  display: inline-block;
  margin-right: 10px;
}
.view-all { color: rgba(255,255,255,0.7); font-size: 14px; }

.right-top-controls {
  display: flex;
  gap: 15px;
  position: relative;
}
/* Stile per rendere l'area cliccabile per le icone */
.right-top-controls button {
  width: 50px; /* Imposta la larghezza dell'area cliccabile */
  height: 50px; /* Imposta l'altezza dell'area cliccabile */
  display: block;
  background: none;
  border: none;
  cursor: pointer;
  position: relative;
  padding: 10px;
}

/* Impostazioni di default per i pulsanti dei top controls (>600px) */
.top-controls button {
  width: 50px;
  height: 50px;
  margin: 0 10px;
}

/* Regole per la dimensione delle icone nei top controls (default: schermi >600px) */
.top-controls button img,
.right-top-controls button img,
.custom-icon {
  width: 40px;
  height: 40px;
}

/* Controlli centrali */
.center-controls {
  position: absolute;
  top: 50%;
  left: 0;
  right: 0;
  transform: translateY(-50%);
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 200px;
  z-index: 133;
}
.center-controls button {
  background: none;
  border: none;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
}
.time-button {
  position: relative;
  width: 50px;
  height: 50px;
  border-radius: 50%;
  background-color: rgba(80,80,80,0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 133;
}
.time-button img { width: 70px; height: 70px; }

/* Pulsante play/pause */
.play-button {
  width: 70px;
  height: 70px;
  background-color: rgba(128,128,128,0.3);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 133;
}
.play-button img { width: 90px; height: 90px; }

/* Controlli in basso */
.bottom-controls {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  padding: 50px;
  background: linear-gradient(to top, rgba(0,0,0,0.7) 0%, transparent 100%);
  z-index: 133;
}
.progress-container {
  height: 10px;
  background-color: rgb(255 255 255 / 25%);
  cursor: pointer;
  margin-bottom: 12px;
  position: relative;
  border-radius: 0;
}
.progress-bar {
  height: 100%;
  width: 0%;
  background-color: #f2f4f6;
  border-radius: 0;
  position: relative;
}
.progress-handle {
  width: 20px;
  height: 20px;
  background-color: rgb(221, 221, 221);
  border-radius: 50%;
  position: absolute;
  right: -8px;
  top: 50%;
  transform: translateY(-50%);
  display: none;
}
.progress-container:hover .progress-handle { display: block; }
.progress-container:hover { height: 10px; }

.time-info {
  display: flex;
  justify-content: space-between;
  align-items: center;
  color: rgba(255,255,255,0.7);
  font-size: 19px;
}
.quality-badge {
  margin-left: 15px;
  background-color: rgb(255 255 255 / 9%);
  padding: 2px 5px;
  border-radius: 3px;
}
.close-button {
  margin-left: 20px;
  font-size: 24px;
  font-weight: bold;
  cursor: pointer;
}

/* Slider per il volume e menu qualità */
#volumeSlider {
  display: none;
  position: absolute;
  transform: translateX(-80px); /* Sposta ulteriormente di 40px a destra */
  right: 40px;
  z-index: 4;
  background: #4545459e;
  padding: 9px;
  border-radius: 5px;
}
#volumeRange:focus,
#volumeRange::-webkit-slider-thumb:focus,
#volumeRange::-moz-focus-inner {
  outline: none;
  box-shadow: none;
  border: none;
}
#volumeRange {
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  width: 100%;
  height: 8px;
}
/* Thumb per Chrome, Safari */
#volumeRange::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 20px;
  height: 20px;
  background: #fff;
  border-radius: 50%;
  cursor: pointer;
  margin-top: -1px;
}
/* Track per Firefox */
#volumeRange::-moz-range-track {
  width: 100%;
  height: 8px;
  background: #a3a3a3;
}
/* Thumb per Firefox */
#volumeRange::-moz-range-thumb {
  width: 20px;
  height: 20px;
  background: #fff;
  border: none;
  cursor: pointer;
}
/* Stili per IE */
#volumeRange::-ms-track {
  width: 100%;
  height: 8px;
  background: #ebebeb;
  border-color: #ebebeb;
  color: #ebebeb;
}
#volumeRange::-ms-fill-lower {
  background: #fff;
}
#volumeRange::-ms-fill-upper {
  background: #a3a3a3;
}
#volumeRange::-ms-thumb {
  width: 20px;
  height: 20px;
  background: #fff;
  border: none;
  cursor: pointer;
}

#qualityMenu {
  display: none;
  position: absolute;
  top: 105px; /* o top: 100% se vuoi che inizi esattamente sotto il pulsante */
  right: 200px;
  z-index: 999; /* per stare sopra altri elementi */
  background: rgb(85, 85, 85);
  padding: 10px;
  border-radius: 5px;
}

.time-indicator {
  position: absolute;
  bottom: 26px; 
  left: 0;
  transform: translateX(-50%);
  background-color: rgb(85, 85, 85);
  color: #fff;
  padding: 4px 8px;
  font-size: 20px;
  border-radius: 4px;
  box-shadow: 0 2px 5px rgba(0,0,0,0.5);
  display: none;
  pointer-events: none;
  white-space: nowrap;
}
.time-indicator::after {
  content: "";
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  bottom: -6px;
  width: 0;
  height: 0;
  border-left: 6px solid transparent;
  border-right: 6px solid transparent;
  border-top: 6px solid rgb(85, 85, 85);
}

/* Nasconde il radio button predefinito */
input[type="radio"] {
  display: none;
}
/* Stile dell'icona personalizzata */
.custom-icon {
  width: 24px;
  height: 24px;
  background: url('https://your-icon-url.com/icon-default.png') no-repeat center center;
  background-size: contain;
  transition: 0.2s ease-in-out;
}
/* Cambia icona quando il radio è selezionato */
input[type="radio"]:checked + .custom-icon {
  background: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTkiIGhlaWdodD0iMTUiIHZpZXdCb3g9IjAgMCAxOSAxNSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+UmVjdGFuZ2xlIDUwICsgUmVjdGFuZ2xlIDUwIENvcHk8L3RpdGxlPjxnIGZpbGw9IiNGRkYiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PHBhdGggZD0iTTIuMTIxIDZsNi4zNjQgNi4zNjQtMi4xMjEgMi4xMjJMMCA4LjEyMnoiLz48cGF0aCBkPSJNMTguNzI4IDIuMTIxTDcuMTIgMTMuNzI4IDUgMTEuNjA3IDE2LjYwNyAwbDIuMTIgMi4xMjF6Ii8+PC9nPjwvc3ZnPg==') no-repeat center center;
  background-size: contain;
}
/* Stile per ogni opzione */
.f15n26ui {
  display: flex;
  align-items: center;
  gap: 10px;
  cursor: pointer;
  padding: 8px;
  border-radius: 5px;
}
.f15n26ui:hover {
  background: rgba(255, 255, 255, 0.1);
}
/* Testo della qualità */
.fqjgbtm {
  font-size: 1.2222222222222222vw;
  font-weight: bold;
  color: white;
}
.f1d63tv1 {
  font-size: 1.2222222222222222vw;
  color: #b0b0b0;
}

.video-container.controls-fixed .top-controls,
.video-container.controls-fixed .center-controls,
.video-container.controls-fixed .bottom-controls,
.video-container.controls-fixed .right-top-controls {
  opacity: 1 !important;
  visibility: visible !important;
  transition: none !important;
}

/* Overlay inizialmente nascosto */
#overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgb(0 0 0 / 55%);
  z-index: 1;
  opacity: 0;
  transition: opacity 0.8s ease-in-out;
  pointer-events: none;
}
/* Quando l'overlay è attivo */
.show-overlay #overlay {
  opacity: 1;
}

/* Media query per dispositivi con larghezza massima di 600px */
@media only screen and (max-width: 813px) {
  /* Riduci il padding e, se necessario, cambia l'orientamento dei controlli in alto */
  .top-controls {
    padding: 1px;
    
  }
  /* Riduci la dimensione delle icone nei top controls */
  .top-controls button img,
  .right-top-controls button img,
  .custom-icon {
    width: 30px;
    height: 30px;
   
  }
  /* Adatta il titolo per non occupare troppo spazio */
  .title {
    display: none;
    
  }
  /* Riduci le dimensioni dei pulsanti in alto a destra */
  .right-top-controls button {
    width: 40px;
    height: 40px;
    margin: 0 8px;
  }
  /* Adatta i controlli centrali */
  .center-controls {
    gap: 80px;
  }
  .center-controls button,
  .time-button,
  .play-button {
    width: 50px;
    height: 50px;
  }
  .center-controls button img,
  .time-button img,
  .play-button img {
    width: 40px;
    height: 40px;
  }
  /* Adatta i controlli in basso */
  .bottom-controls {
    padding: 20px;
  }
 
  /* Adatta lo slider e altri elementi se necessario */
  #volumeSlider {
    transform: translateX(-50px);
    padding: 5px;
  }
}



@media only screen and (min-width: 813px) {
 
    .progress-container {
    height: 15px;
  }
  .progress-container:hover { height: 15px; }
}
 
  .progress-handle {
    width: 25px;
    height: 25px;
    right: -10px; /* riposiziona la maniglia per adattarsi alle nuove dimensioni */
  }
  /* Ingrandisce il tooltip del tempo */
  .time-indicator {
    font-size: 24px;
    padding: 6px 12px;
  }
  /* Ingrandisce il testo dei controlli del tempo */
  .time-info {
    font-size: 24px;
  }


@media (max-width: 1024px) {
  #overlay,
  .show-overlay #overlay {
    display: none !important;
    opacity: 0 !important;
    pointer-events: none !important;
  }
}


/* Versione mobile per dispositivi con larghezza max 1024px */
@media screen and (max-width: 1024px) {
  #qualityMenu {
    top: 95px;  /* Riduci la distanza dall'alto */
    right: 40px; /* Riduci la distanza a destra */
    width: 80%; /* Imposta la larghezza al 80% dello schermo */
    max-width: 300px; /* Limita la larghezza massima */
  }

  .time-indicator {
    font-size: 16px;  /* Imposta una dimensione fissa per il font */
    bottom: 10px;  /* Aumenta la distanza dal basso */
  }

  .custom-icon {
    width: 20px; /* Imposta una dimensione fissa per l'icona */
    height: 20px; /* Imposta una dimensione fissa per l'icona */
  }

  .fqjgbtm {
    font-size: 16px;  /* Imposta una dimensione fissa per il testo */
    font-weight: bold;
    color: white;
  }

  .f1d63tv1 {
    font-size: 14px;  /* Imposta una dimensione fissa per il testo */
    color: #b0b0b0;
  }

  /* Ridurre le dimensioni e il padding per rendere più facile l'interazione su mobile */
  .f15n26ui {
    padding: 6px; 
    font-size: 14px; /* Imposta una dimensione fissa per il testo */
  }

  .f15n26ui:hover {
    background: rgba(255, 255, 255, 0.15); /* Cambia l'effetto hover per essere più visibile */
  }
}


  </style>
</head>
<body>

  <div class="video-container">
    <video id="video">
      
      Il tuo browser non supporta il tag video.
    </video>
    
    
    <!-- Overlay scuro che copre tutto lo schermo -->
  <div id="overlay"></div>
  
    
    
    <!-- Spinner centrato -->
    <div id="spinner" class="spinner">
      <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMzAiIGhlaWdodD0iMTMwIiB2aWV3Qm94PSIwIDAgMTMwIDEzMCI+PHBhdGggZmlsbD0iI0ZGRiIgZD0iTTY1IDEyN0MzMC43NTggMTI3IDMgOTkuMjQxIDMgNjVTMzAuNzU4IDMgNjUgM1YwQzI5LjEwMiAwIDAgMjkuMTAyIDAgNjVzMjkuMTAyIDY1IDY1IDY1di0zeiIvPjxsaW5lYXJHcmFkaWVudCBpZD0iYSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIHgxPSI5Ny41IiB5MT0iMTMwIiB4Mj0iOTcuNSI+PHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjZmZmIi8+PHN0b3Agb2Zmc2V0PSIuODQxIiBzdG9wLWNvbG9yPSIjZmZmIiBzdG9wLW9wYWNpdHk9IjAiLz48L2xpbmVhckdyYWRpZW50PjxwYXRoIGZpbGw9InVybCgjYSkiIGQ9Ik02NSAxMjdjMzQuMjQyIDAgNjItMjcuNzU5IDYyLTYyUzk5LjI0MiAzIDY1IDNWMGMzNS44OTggMCA2NSAyOS4xMDIgNjUgNjVzLTI5LjEwMiA2NS02NSA2NXYtM3oiLz48Y2lyY2xlIGZpbGw9IiNGRkYiIGN4PSI2NSIgY3k9IjEuNSIgcj0iMS41Ii8+PC9zdmc+" alt="Loading" style="width: 94px; height: 94px;">
    </div>
    
     <!-- Controlli in alto -->
    <div class="top-controls">
      <div class="x-ray">
        <span></span>
       
        <span class="view-all"></span>
      </div>
      
      <div class="title">Pirati dei Caraibi – La maledizione del forziere fantasma




</div>
      
      <div class="right-top-controls">
        <button id="devicesBtn">
          <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNSIgaGVpZ2h0PSIyNSIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDI1IDI1Ij48cGF0aCBmaWxsPSIjZmZmIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yMC43NzMgMi4yMDdoLTE2YTQgNCAwIDAgMC00IDR2MTJhNCA0IDAgMCAwIDQgNGgxNmE0IDQgMCAwIDAgNC00di0xMmE0IDQgMCAwIDAtNC00em0tMTYgMmEyIDIgMCAwIDAtMiAydjEyYTIgMiAwIDAgMCAyIDJoMTZhMiAyIDAgMCAwIDItMnYtMTJhMiAyIDAgMCAwLTItMmgtMTZ6bTMgOWExIDEgMCAwIDEgMS0xaDhhMSAxIDAgMSAxIDAgMmgtOGExIDEgMCAwIDEtMS0xem0tMiAzYTEgMSAwIDEgMCAwIDJoMmExIDEgMCAxIDAgMC0yaC0yem01IDFhMSAxIDAgMCAxIDEtMWg4YTEgMSAwIDEgMSAwIDJoLThhMSAxIDAgMCAxLTEtMXoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==" 
     alt="Devices">

        </button>
        <button id="settingsBtn">
          <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNSIgaGVpZ2h0PSIyNSIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDI1IDI1Ij48cGF0aCBmaWxsPSIjZmZmIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik04LjYgNC45OTRjLS4zMzcuMTY2LS42Ni4zNTMtLjk3LjU2bC0xLjk0Ny0uODEyYTEuNSAxLjUgMCAwIDAtMS44NzcuNjM0TDEuODIyIDguODEyYTEuNSAxLjUgMCAwIDAgLjM5IDEuOTQzbDEuNjc4IDEuMjhhOC41OTYgOC41OTYgMCAwIDAgMCAxLjExOGwtMS42NzggMS4yOGExLjUgMS41IDAgMCAwLS4zOSAxLjk0M2wxLjk4NCAzLjQzNmExLjUgMS41IDAgMCAwIDEuODc3LjYzNGwxLjk0Ny0uODEzYy4zMS4yMDcuNjMzLjM5NS45Ny41NmwuMjY5IDIuMDkyYTEuNSAxLjUgMCAwIDAgMS40ODggMS4zMDloMy45NjdhMS41IDEuNSAwIDAgMCAxLjQ4OC0xLjMwOWwuMjY5LTIuMDkxYy4zMzYtLjE2Ni42Ni0uMzU0Ljk3LS41NjFsMS45NDcuODEzYTEuNSAxLjUgMCAwIDAgMS44NzctLjYzNGwxLjk4My0zLjQzNmExLjUgMS41IDAgMCAwLS4zODktMS45NDNsLTEuNjc4LTEuMjhhOC42MyA4LjYzIDAgMCAwIDAtMS4xMThsMS42NzgtMS4yOGExLjUgMS41IDAgMCAwIC4zOS0xLjk0M2wtMS45ODQtMy40MzZhMS41IDEuNSAwIDAgMC0xLjg3Ny0uNjM0bC0xLjk0OC44MTNhOC40NTQgOC40NTQgMCAwIDAtLjk2OS0uNTYxbC0uMjctMi4wOTJhMS41IDEuNSAwIDAgMC0xLjQ4Ny0xLjMwOGgtMy45NjdhMS41IDEuNSAwIDAgMC0xLjQ4OCAxLjMwOGwtLjI3IDIuMDkyem0xLjgzNCAxLjQxNkE2LjQ4IDYuNDggMCAwIDAgNy45NCA3Ljg1Mkw1LjMxOCA2Ljc1NyAzLjc3NCA5LjQzbDIuMjU4IDEuNzIyYTYuNDkgNi40OSAwIDAgMCAwIDIuODgxbC0yLjI1OCAxLjcyMyAxLjU0NCAyLjY3NCAyLjYyMi0xLjA5NWE2LjQ2MiA2LjQ2MiAwIDAgMCAyLjQ5NCAxLjQ0MWwuMzYyIDIuODE3aDMuMDg4bC4zNjMtMi44MTdjLjk0LS4yOSAxLjc5LS43ODggMi40OTMtMS40NDFsMi42MjMgMS4wOTUgMS41NDQtMi42NzQtMi4yNTktMS43MjNhNi40ODkgNi40ODkgMCAwIDAgMC0yLjg4bDIuMjU5LTEuNzIzLTEuNTQ0LTIuNjc0LTIuNjIzIDEuMDk1YTYuNDYxIDYuNDYxIDAgMCAwLTIuNDkzLTEuNDQxbC0uMzYzLTIuODE3aC0zLjA4OGwtLjM2MiAyLjgxNnptMS45MDYgMTAuMTg0YTQgNCAwIDEgMCAwLTggNCA0IDAgMCAwIDAgOHptMC0yYTIgMiAwIDEgMCAwLTQgMiAyIDAgMCAwIDAgNHoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==" alt="Settings" >
        </button>
        <button id="audioBtn">
          <img id="volumeIcon" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNSIgaGVpZ2h0PSIyNCIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDI1IDI0Ij48cGF0aCBzdHJva2U9IiNmZmYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTUgMjBWNEw4LjExNSA3LjkzNEEuNS41IDAgMCAxIDcuODY3IDhIMy41YS41LjUgMCAwIDAtLjUuNXY3YS41LjUgMCAwIDAgLjUuNWg0LjM2N2EuNS41IDAgMCAxIC4yNDguMDY2TDE1IDIweiIvPjxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik0xNy41IDEyYTIgMiAwIDAgMS0yIDJ2LTRhMiAyIDAgMCAxIDIgMnoiLz48cGF0aCBmaWxsPSIjZmZmIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xOC41MzYgNy4wOGEuNzUuNzUgMCAwIDEgMS4wNTMuMTI1QTcuNzIgNy43MiAwIDAgMSAyMS4yNSAxMmE3LjcyIDcuNzIgMCAwIDEtMS42NjEgNC43OTUuNzUuNzUgMCAxIDEtMS4xNzgtLjkyOUE2LjIyIDYuMjIgMCAwIDAgMTkuNzUgMTJjMC0xLjQ2LS41LTIuODAyLTEuMzM5LTMuODY2YS43NS43NSAwIDAgMSAuMTI1LTEuMDUzeiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PHBhdGggZmlsbD0iI2ZmZiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMjAuNTI0IDQuNDM4YS43NS43NSAwIDAgMSAxLjA1NS4xMDMgMTEuNzA1IDExLjcwNSAwIDAgMSAyLjY3MSA3LjQ2YzAgMi44My0xLjAwMiA1LjQzLTIuNjcgNy40NThhLjc1Ljc1IDAgMSAxLTEuMTYtLjk1M0ExMC4yMDUgMTAuMjA1IDAgMCAwIDIyLjc1IDEyYTEwLjIgMTAuMiAwIDAgMC0yLjMzLTYuNTA2Ljc1Ljc1IDAgMCAxIC4xMDQtMS4wNTZ6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=" alt="Volume" >
        </button>
       <!-- Pulsante per entrare in modalità schermo intero -->
<button id="expandBtn">
    <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNSIgaGVpZ2h0PSIyNSIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDI1IDI1Ij48cGF0aCBmaWxsPSIjZmZmIiBkPSJNNC43NDYgOC4wNTZWNi4yOTRMMTguNzMgMjAuMjc4aC0xLjc2MmExLjExMSAxLjExMSAwIDEgMCAwIDIuMjIyaDQuNDQ0YTEuMTEgMS4xMSAwIDAgMCAxLjExMS0xLjExMXYtNC40NDVhMS4xMTEgMS4xMTEgMCAwIDAtMi4yMjIgMHYxLjc2Mkw2LjMxNyA0LjcyMmgxLjc2MmExLjExMSAxLjExMSAwIDEgMCAwLTIuMjIySDMuNjM1Yy0uNjE0IDAtMS4xMTIuNDk3LTEuMTEyIDEuMTExdjQuNDQ1YTEuMTExIDEuMTExIDAgMSAwIDIuMjIzIDB6Ii8+PC9zdmc+" alt="Fullscreen" >
</button>

<!-- Pulsante per uscire dalla modalità schermo intero -->
<button id="exitBtn" style="display: none;">
    <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNSIgaGVpZ2h0PSIyNSIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDI1IDI1Ij48cGF0aCBmaWxsPSIjZmZmIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yLjg0OSA0LjcxbDQuNzcgNC43N0g1Ljg1N2ExLjExMSAxLjExMSAwIDEgMCAwIDIuMjIxSDEwLjNhMS4xMSAxLjExIDAgMCAwIDEuMTExLTEuMTFWNi4xNDVhMS4xMTEgMS4xMTEgMCAwIDAtMi4yMjIgMHYxLjc2MmwtNC43Ny00Ljc3QTEuMTExIDEuMTExIDAgMSAwIDIuODUgNC43MDl6bTE5LjM0OSAxNi4yMDZsLTQuNzctNC43N2gxLjc2MmExLjExMSAxLjExMSAwIDAgMCAwLTIuMjIzaC00LjQ0NGMtLjYxNCAwLTEuMTExLjQ5OC0xLjExMSAxLjExMnY0LjQ0NGExLjExMSAxLjExMSAwIDAgMCAyLjIyMiAwdi0xLjc2Mmw0Ljc3IDQuNzdhMS4xMTEgMS4xMTEgMCAxIDAgMS41NzEtMS41NzF6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=" alt="Exit Fullscreen" >
</button>

        <span class="close-button"></span>
      </div>
    </div>
    
    <!-- Controlli centrali -->
    <div class="center-controls">
      <button class="time-button" id="rewindBtn">
        <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NyIgaGVpZ2h0PSI2NyIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDY3IDY3Ij48cGF0aCBmaWxsPSIjZmZmIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTMzLjUgMEM1MiAwIDY3IDE1IDY3IDMzLjVTNTIgNjcgMzMuNSA2NyAwIDUyIDAgMzMuNWMuMDMtMS40IDEuMTctMi41MyAyLjU4LTIuNTMgMS40IDAgMi41NSAxLjEzIDIuNTcgMi41MyAwIDE1LjY1IDEyLjcgMjguMzUgMjguMzUgMjguMzUgMTUuNjYgMCAyOC4zNS0xMi43IDI4LjM1LTI4LjM1IDAtMTUuNjYtMTIuNjktMjguMzUtMjguMzUtMjguMzVoLS4wNGMtNyAwLTEzLjc2IDIuNjEtMTguOTQgNy4zLS40Ni40Mi0uOTEuODUtMS4zNCAxLjI5aDYuNThjMS40MiAwIDIuNTcgMS4xNiAyLjU3IDIuNTggMCAxLjQyLTEuMTUgMi41OC0yLjU3IDIuNThINi4wMWMtMS40MiAwLTIuNTctMS4xNi0yLjU3LTIuNThWMi41OEMzLjQ0IDEuMTUgNC41OSAwIDYuMDEgMGMxLjQzIDAgMi41OCAxLjE1IDIuNTggMi41OHY4LjUyYy43OC0uODYgMS42MS0xLjcgMi40Ny0yLjQ3QTMzLjQwNyAzMy40MDcgMCAwIDEgMzMuNDYgMGguMDR6bS40OCA0MS4zNGMtMS42LTIuMjEtMi01LjItMi03Ljg1IDAtMi42NS40LTUuNjMgMi03LjgzIDEuNDQtMS45NyAzLjQ3LTIuODQgNS44OC0yLjg0IDIuNDEgMCA0LjQyLjg3IDUuODYgMi44NCAxLjYxIDIuMjEgMi4wMyA1LjE2IDIuMDMgNy44MyAwIDIuNjYtLjQgNS42NC0yIDcuODUtMS40MyAxLjk3LTMuNDcgMi44NC01Ljg5IDIuODQtMi40MSAwLTQuNDUtLjg2LTUuODgtMi44NHptLTkuNzMtMTIuNzdsLTUgMS41OHYtNC4yMWw1Ljg3LTIuNjVoNC4yOHYyMC40N2gtNS4xNVYyOC41N3ptMTcuNjEgOS45NmMuNjEtMS4zMy42OC0zLjYuNjgtNS4wNHMtLjA3LTMuNy0uNjgtNS4wMmMtLjQtLjg2LTEuMDQtMS4yOS0yLTEuMjktLjk1IDAtMS41OS40Mi0xLjk5IDEuMjktLjYxIDEuMzItLjY4IDMuNTgtLjY4IDUuMDIgMCAxLjQ0LjA3IDMuNzEuNjggNS4wNC40Ljg3IDEuMDQgMS4yOSAxLjk5IDEuMjkuOTYgMCAxLjYtLjQyIDItMS4yOXoiLz48L3N2Zz4=" alt="Rewind" >
        <span></span>
      </button>
      
      <button class="play-button" id="playPauseBtn">
        <!-- L'icona cambierà tra play e pause -->
        <img id="playIcon" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NyIgaGVpZ2h0PSI2NyIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDY3IDY3Ij48cGF0aCBmaWxsPSIjZmZmIiBkPSJNMjAuMjggOS42NWMtMi4yMDUtMS4yNjgtNC4wMjYtLjIyOC00LjAyNiAyLjMwN3Y0My44MDVjMCAyLjUzNSAxLjgyIDMuNTc0IDQuMDI3IDIuMzA3bDM4LjQ3MS0yMS45MDNhMi41NTYgMi41NTYgMCAwIDAgMS4wOTQtLjkzNSAyLjUxNCAyLjUxNCAwIDAgMCAwLTIuNzQzIDIuNTU2IDIuNTU2IDAgMCAwLTEuMDkzLS45MzZMMjAuMjggOS42NXoiLz48L3N2Zz4=" alt="Play">
        
      </button>
      
      <button class="time-button" id="forwardBtn">
        <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NyIgaGVpZ2h0PSI2NyIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDY3IDY3Ij48cGF0aCBmaWxsPSIjZmZmIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0zMy41IDBDMTUgMCAwIDE1IDAgMzMuNVMxNSA2NyAzMy41IDY3IDY3IDUyIDY3IDMzLjVhMi41ODMgMi41ODMgMCAwIDAtMi41OC0yLjUzYy0xLjQgMC0yLjU1IDEuMTMtMi41NyAyLjUzIDAgMTUuNjYtMTIuNjkgMjguMzUtMjguMzUgMjguMzUtMTUuNjUgMC0yOC4zNS0xMi43LTI4LjM1LTI4LjM1IDAtMTUuNjYgMTIuNy0yOC4zNSAyOC4zNS0yOC4zNSA3LjMgMCAxMy45NiAyLjc2IDE4Ljk5IDcuMy40Ni40Mi45Ljg1IDEuMzQgMS4yOWgtNi41OWEyLjU4IDIuNTggMCAwIDAgMCA1LjE2aDEzLjc1YzEuNDIgMCAyLjU3LTEuMTYgMi41Ny0yLjU4VjIuNThjMC0xLjQzLTEuMTUtMi41OC0yLjU3LTIuNTgtMS40MyAwLTIuNTggMS4xNS0yLjU4IDIuNTh2OC41MmMtLjc4LS44Ny0xLjYxLTEuNy0yLjQ3LTIuNDhBMzMuNDQ2IDMzLjQ0NiAwIDAgMCAzMy41NCAwaC0uMDR6bS40OCA0MS4zNGMtMS42LTIuMjEtMi01LjItMi03Ljg1IDAtMi42NS40LTUuNjMgMi03LjgzIDEuNDQtMS45NyAzLjQ3LTIuODQgNS44OC0yLjg0IDIuNDEgMCA0LjQyLjg3IDUuODYgMi44NCAxLjYxIDIuMjEgMi4wMyA1LjE2IDIuMDMgNy44MyAwIDIuNjYtLjQgNS42NC0yIDcuODUtMS40MyAxLjk3LTMuNDcgMi44NC01Ljg5IDIuODQtMi40MSAwLTQuNDUtLjg3LTUuODgtMi44NHptLTkuNzMtMTIuNzdsLTUgMS41OHYtNC4yMWw1Ljg3LTIuNjVoNC4yOHYyMC40N2gtNS4xNVYyOC41N3ptMTcuNjEgOS45NmMuNjEtMS4zMy42OC0zLjYuNjgtNS4wNHMtLjA3LTMuNy0uNjgtNS4wMmMtLjQtLjg3LTEuMDQtMS4yOS0yLTEuMjktLjk1IDAtMS41OS40Mi0xLjk5IDEuMjktLjYxIDEuMzItLjY4IDMuNTgtLjY4IDUuMDIgMCAxLjQ0LjA3IDMuNzEuNjggNS4wNC40Ljg2IDEuMDQgMS4yOCAxLjk5IDEuMjguOTYgMCAxLjYtLjQyIDItMS4yOHoiLz48L3N2Zz4=" alt="Forward" >
        <span></span>
      </button>
    </div>
    
    <!-- Controlli in basso -->
    <div class="bottom-controls">
      <div class="progress-container" id="progressContainer">
        <div class="progress-bar" id="progressBar">
          <div class="progress-handle"></div>
        </div>
        <!-- Tooltip per il tempo -->
        <div class="time-indicator" id="timeIndicator">00:00</div>
      </div>
      
      <div class="time-info">
        <div>
          <!-- Lato sinistro: tempo trascorso; lato destro: tempo rimanente -->
          <span id="currentTime">00:00</span>
          <span> / </span>
          <span id="totalTime">00:00</span>
          <span class="quality-badge">HD</span>
        </div>
      </div>
    </div>
    
    <!-- Slider per il volume -->
    <div id="volumeSlider">
     <input type="range" id="volumeRange" min="0" max="1" step="0.05" value="1" style="background: linear-gradient(to right, rgb(255, 255, 255) 50%, rgb(111 111 111) 10%);">
    </div>
    
 <!-- Menu Qualità -->
    <div id="qualityMenu">
      <div class="f1sp9t98 fsp955f">
        <div class="fheif50 f1ly7q5u f2clw3d" role="group" aria-labelledby="option-heading" tabindex="0">
          <h1 id="option-heading" class="fheif50 f1ly7q5u f2clw3d">Qualità video</h1>
          <div tabindex="0" role="group">
            <div class="f1dqudmj">

  <!-- Opzione: Buona (360p) -->
  <div class="f15n26ui atvwebplayersdk-videoquality-checkbox fuq16ie">
    <input type="radio" name="videoQuality" id="good" value="360p" data-src="https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8">
    <div class="custom-icon"></div>
    <label for="good">
      <div class="fqjgbtm">Buona</div>
      <div class="f1d63tv1">Utilizza circa 0,38 GB per un’ora di video</div>
    </label>
  </div>

  <!-- Opzione: Superiore (720p) -->
  <div class="f15n26ui atvwebplayersdk-videoquality-checkbox fuq16ie">
    <input type="radio" name="videoQuality" id="better" value="720p" data-src="https://ms-055.host-cdn.net/hls/llzeftmorahnmttc2tmmjymo3qgirnc76ztvxipztxfupj4e2dr56cdlt54q/index-v1-a1.m3u8">
    <div class="custom-icon"></div>
    <label for="better">
      <div class="fqjgbtm">Superiore</div>
      <div class="f1d63tv1">Utilizza circa 1,40 GB per un’ora di video</div>
    </label>
  </div>

  <!-- Opzione: Ottima (1080p) -->
  <div class="f15n26ui atvwebplayersdk-videoquality-checkbox fuq16ie">
    <input type="radio" name="videoQuality" id="best" value="1080p" data-src="https://ms-055.host-cdn.net/hls/llzeftmorahnmttc2tmmjymo3qgirnc76ztvxipztxfupj4e2dr56cdlt54q/index-v1-a1.m3u8" checked>
    <div class="custom-icon"></div>
    <label for="best">
      <div class="fqjgbtm">Ottima</div>
      <div class="f1d63tv1">Utilizza circa 6,84 GB per un’ora di video</div>
    </label>
    
  </div>

</div>

          </div>
        </div>
      </div>
    </div>

  </div>

  
  
<script>
document.addEventListener('DOMContentLoaded', function() {
  const playPauseBtn = document.getElementById('playPauseBtn');
  const playIcon = document.getElementById('playIcon');
  const rewindBtn = document.getElementById('rewindBtn');
  const forwardBtn = document.getElementById('forwardBtn');
  const progressContainer = document.getElementById('progressContainer');
  const progressBar = document.getElementById('progressBar');
  const currentTimeElement = document.getElementById('currentTime');
  const totalTimeElement = document.getElementById('totalTime');
  const videoContainer = document.querySelector('.video-container');
  const expandBtn = document.getElementById('expandBtn');
  const exitBtn = document.getElementById('exitBtn');
  const closeButton = document.querySelector('.close-button');
  const audioBtn = document.getElementById('audioBtn');
  const volumeSlider = document.getElementById('volumeSlider');
  const volumeRange = document.getElementById('volumeRange');
  const volumeIcon = document.getElementById('volumeIcon');
  const settingsBtn = document.getElementById('settingsBtn');
  const qualityMenu = document.getElementById('qualityMenu');
  const qualityOptions = qualityMenu.querySelectorAll('input');
  const timeIndicator = document.getElementById('timeIndicator');
  const spinner = document.getElementById('spinner');
  const video = document.getElementById('video');
  
  let hls = null; // Dichiara l'istanza Hls fuori dall'evento per poterla riutilizzare
  let currentVideoTime = 0; // Variabile per memorizzare il tempo corrente
  let isVideoPlaying = false; // Variabile per tenere traccia dello stato di riproduzione

  // Funzione per avviare un nuovo flusso
  function loadVideoSource(src) {
  currentVideoTime = video.currentTime;
  isVideoPlaying = !video.paused;

  // Se esiste un'istanza Hls, distruggila
  if (hls) {
    hls.destroy();
    hls = null;
  }

// Se il browser supporta hls.js
  if (Hls.isSupported()) {
    hls = new Hls();
    hls.loadSource(src);
    hls.attachMedia(video);
    
    video.addEventListener('waiting', () => {
      spinner.style.display = 'block';
    });

    video.addEventListener('playing', () => {
      spinner.style.display = 'none';
    });

    video.addEventListener('loadedmetadata', () => {
      video.currentTime = currentVideoTime;
      if (isVideoPlaying) {
        video.play();
      }
    });
  } 
  // Altrimenti, usa la gestione nativa per Safari su iOS
  else if (video.canPlayType('application/vnd.apple.mpegurl')) {
    video.src = src;
    video.load();

    video.addEventListener('loadedmetadata', () => {
      video.currentTime = currentVideoTime;
      if (isVideoPlaying) {
        video.play();
      }
    });
  } 
  else {
    alert('Il tuo browser non supporta HLS');
  }
}

  // Carica il video iniziale con la qualità predefinita
  const initialSrc = 'https://ms-055.host-cdn.net/hls/llzeftmorahnmttc2tmmjymo3qgirnc76ztvxipztxfupj4e2dr56cdlt54q/index-v1-a1.m3u8'; // Qualità predefinita
  loadVideoSource(initialSrc);

  // Aggiungi un evento per il cambiamento di qualità
  qualityOptions.forEach(option => {
    option.addEventListener('change', function() {
      const selectedQualitySrc = option.getAttribute('data-src'); // Ottieni la nuova sorgente
      loadVideoSource(selectedQualitySrc);
    });
  });
  
  // Stato iniziale: mostra sempre il pulsante play e nascondi lo spinner
  playPauseBtn.style.visibility = 'visible';
  spinner.style.display = 'none';
  
  // Variabili di stato
  let useHours = false;
  let volumeTimeout, controlsTimeout;
  
  // URL delle icone (play, pause e volume)
  const playIconUrl = "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NyIgaGVpZ2h0PSI2NyIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDY3IDY3Ij48cGF0aCBmaWxsPSIjZmZmIiBkPSJNMjAuMjggOS42NWMtMi4yMDUtMS4yNjgtNC4wMjYtLjIyOC00LjAyNiAyLjMwN3Y0My44MDVjMCAyLjUzNSAxLjgyIDMuNTc0IDQuMDI3IDIuMzA3bDM4LjQ3MS0yMS45MDNhMi41NTYgMi41NTYgMCAwIDAgMS4wOTQtLjkzNSAyLjUxNCAyLjUxNCAwIDAgMCAwLTIuNzQzIDIuNTU2IDIuNTU2IDAgMCAwLTEuMDkzLS45MzZMMjAuMjggOS42NXoiLz48L3N2Zz4=";
  const pauseIconUrl = "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NyIgaGVpZ2h0PSI2NyIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDY3IDY3Ij48cGF0aCBmaWxsPSIjZmZmIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00Ni4zMzIgNS43NzNhNC4xMjUgNC4xMjUgMCAwIDAtNC4xMjUgNC4xMjV2NDYuNzVhNC4xMjcgNC4xMjcgMCAwIDAgNC4xMjUgNC4xMjUgNC4xMjcgNC4xMjcgMCAwIDAgNC4xMjUtNC4xMjVWOS44OThhNC4xMjUgNC4xMjUgMCAwIDAtNC4xMjUtNC4xMjV6TTI1LjcwNyA5Ljg5OHY0Ni43NWE0LjEyNSA0LjEyNSAwIDEgMS04LjI1IDBWOS44OThhNC4xMjMgNC4xMjMgMCAwIDEgNC4xMjUtNC4xMjUgNC4xMjMgNC4xMjMgMCAwIDEgNC4xMjUgNC4xMjV6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=";
  
  const volumeHighIcon = "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNSIgaGVpZ2h0PSIyNCIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDI1IDI0Ij48cGF0aCBzdHJva2U9IiNmZmYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTUgMjBWNEw4LjExNSA3LjkzNEEuNS41IDAgMCAxIDcuODY3IDhIMy41YS41LjUgMCAwIDAtLjUuNXY3YS41LjUgMCAwIDAgLjUuNWg0LjM2N2EuNS41IDAgMCAxIC4yNDguMDY2TDE1IDIweiIvPjxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik0xNy41IDEyYTIgMiAwIDAgMS0yIDJ2LTRhMiAyIDAgMCAxIDIgMnoiLz48cGF0aCBmaWxsPSIjZmZmIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xOC41MzYgNy4wOGEuNzUuNzUgMCAwIDEgMS4wNTMuMTI1QTcuNzIgNy43MiAwIDAgMSAyMS4yNSAxMmE3LjcyIDcuNzIgMCAwIDEtMS42NjEgNC43OTUuNzUuNzUgMCAxIDEtMS4xNzgtLjkyOUE2LjIyIDYuMjIgMCAwIDAgMTkuNzUgMTJjMC0xLjQ2LS41LTIuODAyLTEuMzM5LTMuODY2YS43NS43NSAwIDAgMSAuMTI1LTEuMDUzeiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PHBhdGggZmlsbD0iI2ZmZiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMjAuNTI0IDQuNDM4YS43NS43NSAwIDAgMSAxLjA1NS4xMDMgMTEuNzA1IDExLjcwNSAwIDAgMSAyLjY3MSA3LjQ2YzAgMi44My0xLjAwMiA1LjQzLTIuNjcgNy40NThhLjc1Ljc1IDAgMSAxLTEuMTYtLjk1M0ExMC4yMDUgMTAuMjA1IDAgMCAwIDIyLjc1IDEyYTEwLjIgMTAuMiAwIDAgMC0yLjMzLTYuNTA2Ljc1Ljc1IDAgMCAxIC4xMDQtMS4wNTZ6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=";
  const volumeMediumIcon = "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBzdHJva2U9IiNmZmYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTUgMjBWNEw4LjExNSA3LjkzNEEuNS41IDAgMCAxIDcuODY3IDhIMy41YS41LjUgMCAwIDAtLjUuNXY3YS41LjUgMCAwIDAgLjUuNWg0LjM2N2EuNS41IDAgMCAxIC4yNDguMDY2TDE1IDIweiIvPjxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik0xNy41IDEyYTIgMiAwIDAgMS0yIDJ2LTRhMiAyIDAgMCAxIDIgMnoiLz48cGF0aCBmaWxsPSIjZmZmIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xOC41MzYgNy4wOGEuNzUuNzUgMCAwIDEgMS4wNTMuMTI1QTcuNzIgNy43MiAwIDAgMSAyMS4yNSAxMmE3LjcyIDcuNzIgMCAwIDEtMS42NjEgNC43OTUuNzUuNzUgMCAxIDEtMS4xNzgtLjkyOUE2LjIyIDYuMjIgMCAwIDAgMTkuNzUgMTJjMC0xLjQ2LS41LTIuODAyLTEuMzM5LTMuODY2YS43NS43NSAwIDAgMSAuMTI1LTEuMDUzeiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+";
  const volumeMuteIcon = "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNSIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDI0IDI1Ij48cGF0aCBzdHJva2U9IiNmZmYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMTUgMjBWNEw4LjExNSA3LjkzNEEuNS41IDAgMCAxIDcuODY3IDhIMy41YS41LjUgMCAwIDAtLjUuNXY3YS41LjUgMCAwIDAgLjUuNWg0LjM2N2EuNS41IDAgMCAxIC4yNDguMDY2TDE1IDIwem01LTE3TDQgMjEiLz48cGF0aCBzdHJva2U9IiMyMTIxMjEiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLXJ1bGU9ImV2ZW5vZGQiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTE5LjExIDcuMDE0TDUuMDggMjMuOTIyIi8+PC9zdmc+";
  
  // Aggiorna l'icona del volume in base al valore
  function updateVolumeIcon(volume) {
    if (volume === 0) {
      volumeIcon.src = volumeMuteIcon;
    } else if (volume > 0 && volume <= 0.5) {
      volumeIcon.src = volumeMediumIcon;
    } else {
      volumeIcon.src = volumeHighIcon;
    }
  }
  
  volumeRange.addEventListener('input', function() {
    video.volume = volumeRange.value;
    updateVolumeIcon(video.volume);
    updateVolumeBackground();
    startVolumeTimeout();
  });
  
  // Timer per nascondere il volume slider
  function resetVolumeSlider() {
    volumeRange.value = 1;
    video.volume = 1;
    updateVolumeIcon(1);
    updateVolumeBackground();
    volumeSlider.style.display = 'none';
  }
  function startVolumeTimeout() {
    clearTimeout(volumeTimeout);
    volumeTimeout = setTimeout(resetVolumeSlider, 3000);
  }
  
  // Funzioni per formattare il tempo
  function formatTime(seconds) {
    if (isNaN(seconds)) return "00:00";
    let hrs = Math.floor(seconds / 3600);
    let mins = Math.floor((seconds % 3600) / 60);
    let secs = Math.floor(seconds % 60);
    return hrs > 0 
      ? String(hrs).padStart(2, '0') + ':' + String(mins).padStart(2, '0') + ':' + String(secs).padStart(2, '0')
      : String(mins).padStart(2, '0') + ':' + String(secs).padStart(2, '0');
  }
  
  function updateTimeDisplay() {
    currentTimeElement.textContent = formatTime(video.currentTime);
    totalTimeElement.textContent = formatTime(video.duration - video.currentTime);
  }
  
  function updateProgressBar() {
    const progress = (video.currentTime / video.duration) * 100;
    progressBar.style.width = progress + '%';
  }
  
  // Funzione per attivare o sospendere la riproduzione.
  // Su dispositivi mobile, se non si usa playsinline, il lettore nativo si aprirà automaticamente al click.
  function togglePlayPause() {
    if (video.paused) {
      video.play();
      playIcon.src = pauseIconUrl;
    } else {
      video.pause();
      playIcon.src = playIconUrl;
    }
  }
  
  playPauseBtn.addEventListener('click', togglePlayPause);
  videoContainer.addEventListener('click', function(e) {
    if (e.target === videoContainer || e.target === video) {
      togglePlayPause();
    }
  });
  
  // Rewind e forward
  rewindBtn.addEventListener('click', function() {
    video.currentTime = Math.max(0, video.currentTime - 10);
  });
  forwardBtn.addEventListener('click', function() {
    video.currentTime = Math.min(video.duration, video.currentTime + 10);
  });
  
  // Fullscreen (per desktop; su mobile verrà usato il lettore nativo)
  function enterFullscreen() {
    if (document.documentElement.requestFullscreen) {
      document.documentElement.requestFullscreen();
    } else if (document.documentElement.webkitRequestFullscreen) {
      document.documentElement.webkitRequestFullscreen();
    }
    expandBtn.style.display = 'none';
    exitBtn.style.display = 'block';
  }
  function exitFullscreen() {
    if (document.exitFullscreen) {
      document.exitFullscreen();
    } else if (document.webkitExitFullscreen) {
      document.webkitExitFullscreen();
    }
    exitBtn.style.display = 'none';
    expandBtn.style.display = 'block';
  }
  expandBtn.addEventListener('click', enterFullscreen);
  exitBtn.addEventListener('click', exitFullscreen);
  document.addEventListener('fullscreenchange', function() {
    if (!document.fullscreenElement) {
      expandBtn.style.display = 'block';
      exitBtn.style.display = 'none';
    }
  });
  
  // Listener per il pulsante di chiusura del player
  closeButton.addEventListener('click', function() {
    alert("Chiusura del player");
  });
  
  // Aggiorna tempo e progress bar durante la riproduzione
  video.addEventListener('timeupdate', function() {
    updateTimeDisplay();
    updateProgressBar();
  });
  video.addEventListener('loadedmetadata', function() {
    video.currentTime = 0;
    updateTimeDisplay();
  });
  
  // IMPORTANTE: quando il video è pronto, nascondi lo spinner e mostra sempre l'icona play
  video.addEventListener('loadeddata', function() {
    spinner.style.display = 'none';
    playPauseBtn.style.visibility = 'visible';
  });
  
  // Aggiungi un fallback: se dopo 3 secondi il video è in stato "ready" o quasi, forza la rimozione dello spinner.
  setTimeout(function() {
    if (spinner.style.display !== 'none') {
      spinner.style.display = 'none';
      playPauseBtn.style.visibility = 'visible';
    }
  }, 3000);
  
  // Gestione della progress bar: click e hover per mostrare l'indicatore del tempo
  progressContainer.addEventListener('click', function(e) {
    const rect = progressContainer.getBoundingClientRect();
    const pos = (e.clientX - rect.left) / rect.width;
    video.currentTime = pos * video.duration;
  });
  progressContainer.addEventListener('mousemove', function(e) {
    const rect = progressContainer.getBoundingClientRect();
    const pos = (e.clientX - rect.left) / rect.width;
    const time = pos * video.duration;
    timeIndicator.textContent = formatTime(time);
    timeIndicator.style.left = `${e.clientX - rect.left}px`;
    timeIndicator.style.display = 'block';
  });
  progressContainer.addEventListener('mouseout', function() {
    timeIndicator.style.display = 'none';
  });
  
  // Gestione del volume slider: lo posiziona sotto l'icona e mostra/nasconde il controllo
  audioBtn.addEventListener('click', function(e) {
    e.stopPropagation();
    const rect = audioBtn.getBoundingClientRect();
    if (!volumeSlider.style.display || volumeSlider.style.display === 'none') {
      volumeSlider.style.display = 'block';
      volumeSlider.style.position = 'absolute';
      volumeSlider.style.left = rect.left + 'px';
      volumeSlider.style.top = (rect.bottom + 5) + 'px';
      startVolumeTimeout();
    } else {
      clearTimeout(volumeTimeout);
      volumeSlider.style.display = 'none';
    }
  });
  volumeSlider.addEventListener('mousemove', startVolumeTimeout);
  
  function updateVolumeBackground() {
    const percentage = volumeRange.value * 100;
    volumeRange.style.background = `linear-gradient(to right, #fff ${percentage}%, #555 ${percentage}%)`;
  }
  updateVolumeBackground();
  volumeRange.style.transformOrigin = "center";
  
  // Menu Qualità
  settingsBtn.addEventListener('click', function(e) {
    e.stopPropagation();
    qualityMenu.style.display = (!qualityMenu.style.display || qualityMenu.style.display === 'none') ? 'block' : 'none';
  });
  qualityOptions.forEach(option => {
    option.addEventListener('click', function() {
      const newSrc = this.getAttribute('data-src');
      const currentTimeSaved = video.currentTime;
      const wasPaused = video.paused;
      video.pause();
      video.querySelector('source').src = newSrc;
      video.load();
      video.addEventListener('loadedmetadata', function() {
        video.currentTime = currentTimeSaved;
        if (!wasPaused) video.play();
        useHours = video.duration >= 3600;
        updateTimeDisplay();
      }, {once: true});
      qualityMenu.style.display = 'none';
    });
  });
  
  // Chiude i menu (volume e qualità) se si clicca fuori
  document.addEventListener('click', function(e) {
    if (!volumeSlider.contains(e.target) && e.target !== audioBtn) {
      volumeSlider.style.display = 'none';
    }
    if (!qualityMenu.contains(e.target) && e.target !== settingsBtn) {
      qualityMenu.style.display = 'none';
    }
  });
  
  // Gestione dello spinner per il buffering
  video.addEventListener('loadstart', function() {
    spinner.style.display = 'block';
    playPauseBtn.style.visibility = 'hidden';
  });
  video.addEventListener('waiting', function() {
    spinner.style.display = 'block';
    playPauseBtn.style.visibility = 'hidden';
  });
  video.addEventListener('canplay', function() {
    spinner.style.display = 'none';
    playPauseBtn.style.visibility = 'visible';
  });
  video.addEventListener('playing', function() {
    spinner.style.display = 'none';
    playPauseBtn.style.visibility = 'visible';
  });
  
  // Nascondi i controlli dopo inattività (per desktop)
  videoContainer.addEventListener('mousemove', function() {
    clearTimeout(controlsTimeout);
    document.querySelector('.top-controls').style.opacity = '1';
    document.querySelector('.center-controls').style.opacity = '1';
    document.querySelector('.bottom-controls').style.opacity = '1';
    controlsTimeout = setTimeout(function() {
      if (!video.paused) {
        document.querySelector('.top-controls').style.opacity = '0';
        document.querySelector('.center-controls').style.opacity = '0';
        document.querySelector('.bottom-controls').style.opacity = '0';
      }
    }, 13000);
  });
});
</script>

<!-- Script per i controlli overlay e tastiera -->
<script>
  const video = document.getElementById("video");
  const playIcon = document.getElementById("playIcon");
  const videoContainer = document.querySelector(".video-container");
  const overlay = document.getElementById("overlay");
  const controls = document.querySelectorAll(".top-controls, .center-controls, .bottom-controls, .right-top-controls");
  let controlsVisible = false;
  let hideTimeout;
  
function isMobile() {
  return /Mobi|Android|iPhone/i.test(navigator.userAgent);
}

function showControls() {
  // Se siamo su mobile, non aggiungiamo l'overlay
  if (!isMobile()) {
    videoContainer.classList.add("show-overlay");
    overlay.style.opacity = "1";
  }
  controls.forEach(control => {
    control.style.opacity = "1";
    control.style.pointerEvents = "auto";
  });
  if (!video.paused) {
    clearTimeout(hideTimeout);
    hideTimeout = setTimeout(hideControls, 3000);
  }
}


  
  function hideControls() {
    if (video.paused) return;
    controlsVisible = false;
    videoContainer.classList.remove("show-overlay");
    controls.forEach(control => {
      control.style.opacity = "0";
      control.style.pointerEvents = "none";
    });
    overlay.style.opacity = "0";
  }
  
   // Controlli con la tastiera
  document.addEventListener("keydown", function (event) {
    switch (event.key) {
      case "ArrowRight":
        video.currentTime += 10;
        break;
      case "ArrowLeft":
        video.currentTime -= 10;
        break;
      case "Enter":
        event.preventDefault();
        if (!video.paused) {
          video.pause();
          playIcon.src = "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NyIgaGVpZ2h0PSI2NyIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDY3IDY3Ij48cGF0aCBmaWxsPSIjZmZmIiBkPSJNMjAuMjggOS42NWMtMi4yMDUtMS4yNjgtNC4wMjYtLjIyOC00LjAyNiAyLjMwN3Y0My44MDVjMCAyLjUzNSAxLjgyIDMuNTc0IDQuMDI3IDIuMzA3bDM4LjQ3MS0yMS45MDNhMi41NTYgMi41NTYgMCAwIDAgMS4wOTQtLjkzNSAyLjUxNCAyLjUxNCAwIDAgMCAwLTIuNzQzIDIuNTU2IDIuNTU2IDAgMCAwLTEuMDkzLS45MzZMMjAuMjggOS42NXoiLz48L3N2Zz4="; // Cambia l'icona in play
          videoContainer.classList.add("controls-fixed"); // Mantiene i controlli visibili
        } else {
          video.play();
          playIcon.src = "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NyIgaGVpZ2h0PSI2NyIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDY3IDY3Ij48cGF0aCBmaWxsPSIjZmZmIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00Ni4zMzIgNS43NzNhNC4xMjUgNC4xMjUgMCAwIDAtNC4xMjUgNC4xMjV2NDYuNzVhNC4xMjcgNC4xMjcgMCAwIDAgNC4xMjUgNC4xMjUgNC4xMjcgNC4xMjcgMCAwIDAgNC4xMjUtNC4xMjVWOS44OThhNC4xMjUgNC4xMjUgMCAwIDAtNC4xMjUtNC4xMjV6TTI1LjcwNyA5Ljg5OHY0Ni43NWE0LjEyNSA0LjEyNSAwIDEgMS04LjI1IDBWOS44OThhNC4xMjMgNC4xMjMgMCAwIDEgNC4xMjUtNC4xMjUgNC4xMjMgNC4xMjMgMCAwIDEgNC4xMjUgNC4xMjV6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4="; // Cambia l'icona in pausa
          videoContainer.classList.remove("controls-fixed");
        }
        showControls(); // Mostra i controlli quando si preme invio
        break;
    }
  });
  
  document.addEventListener("mousemove", showControls);
  document.addEventListener("mouseleave", hideControls);
  
  const controlButtons = document.querySelectorAll(".top-controls button, .center-controls button, .bottom-controls button, .right-top-controls button");
  controlButtons.forEach(button => {
    button.addEventListener("click", function () {
      videoContainer.classList.remove("controls-fixed");
      button.blur();
    });
  });
</script>



</body>
</html>
